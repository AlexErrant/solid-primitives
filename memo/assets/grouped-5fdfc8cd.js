import{o as J,e as N,p as R,c as K,h as Z,q as ee,i as I,b as O,S as A,t as L}from"./index-fa35a9ad.js";import{b as te,t as ne,e as re,d as w,f as S,g as U,h as se,i as oe}from"./index-ca17fa6c.js";var ie=Object.defineProperty,d=(e,t)=>ie(e,"name",{value:t,configurable:!0});function T(e,t,r,n){return e.addEventListener(t,r,n),ne(e.removeEventListener.bind(e,t,r,n))}d(T,"makeEventListener");function _(e,t,r,n){const s=d(()=>{w(S(e)).forEach(o=>{o&&w(S(t)).forEach(i=>T(o,i,r,n))})},"attachListeners");typeof e=="function"?N(s):R(s)}d(_,"createEventListener");function ue(e,t,r){const[n,s]=K();return _(e,t,s,r),n}d(ue,"createEventSignal");function ae(e,t,r){for(const[n,s]of re(t))s&&_(e,n,s,r)}d(ae,"createEventListenerMap");function P(e,t){const{push:r,execute:n}=te();return[(s,o,i)=>{const a=T(e,s,o,i??t);return r(a),a},J(n)]}d(P,"makeEventListenerStack");let le=Y;const y=1,g=2,ce={owned:null,cleanups:null,context:null,owner:null};var l=null;let m=null,c=null,f=null,v=null,k=0;function D(e,t){const r=c,n=l,s=e.length===0,o=s?ce:{owned:null,cleanups:null,context:null,owner:t===void 0?n:t},i=s?e:()=>e(()=>V(()=>E(o)));l=o,c=null;try{return b(i,!0)}finally{c=r,l=n}}function V(e){if(c===null)return e();const t=c;c=null;try{return e()}finally{c=t}}function F(e){return l===null||(l.cleanups===null?l.cleanups=[e]:l.cleanups.push(e)),e}function j(){return l}function fe(e,t){const r=l,n=c;l=e,c=null;try{return b(t,!0)}catch(s){$(s)}finally{l=r,c=n}}function pe(e,t,r){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&b(()=>{for(let s=0;s<e.observers.length;s+=1){const o=e.observers[s],i=m&&m.running;i&&m.disposed.has(o),(i&&!o.tState||!i&&!o.state)&&(o.pure?f.push(o):v.push(o),o.observers&&G(o)),i||(o.state=y)}if(f.length>1e6)throw f=[],new Error},!1)),t}function he(e){if(!e.fn)return;E(e);const t=l,r=c,n=k;c=l=e,ve(e,e.value,n),c=r,l=t}function ve(e,t,r){let n;try{n=e.fn(t)}catch(s){e.pure&&(e.state=y,e.owned&&e.owned.forEach(E),e.owned=null),$(s)}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?pe(e,n):e.value=n,e.updatedAt=r)}function X(e){const t=m;if(e.state===0||t)return;if(e.state===g||t)return x(e);if(e.suspense&&V(e.suspense.inFallback))return e.suspense.effects.push(e);const r=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<k);)(e.state||t)&&r.push(e);for(let n=r.length-1;n>=0;n--)if(e=r[n],e.state===y||t)he(e);else if(e.state===g||t){const s=f;f=null,b(()=>x(e,r[0]),!1),f=s}}function b(e,t){if(f)return e();let r=!1;t||(f=[]),v?r=!0:v=[],k++;try{const n=e();return me(r),n}catch(n){r||(v=null),f=null,$(n)}}function me(e){if(f&&(Y(f),f=null),e)return;const t=v;v=null,t.length&&b(()=>le(t),!1)}function Y(e){for(let t=0;t<e.length;t++)X(e[t])}function x(e,t){const r=m;e.state=0;for(let n=0;n<e.sources.length;n+=1){const s=e.sources[n];s.sources&&(s.state===y||r?s!==t&&X(s):(s.state===g||r)&&x(s,t))}}function G(e){const t=m;for(let r=0;r<e.observers.length;r+=1){const n=e.observers[r];(!n.state||t)&&(n.state=g,n.pure?f.push(n):v.push(n),n.observers&&G(n))}}function E(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),s=r.observers;if(s&&s.length){const o=s.pop(),i=r.observerSlots.pop();n<s.length&&(o.sourceSlots[i]=n,s[n]=o,r.observerSlots[n]=i)}}if(e.owned){for(t=0;t<e.owned.length;t++)E(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function de(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function $(e){throw e=de(e),e}var be=Object.defineProperty,M=(e,t)=>be(e,"name",{value:t,configurable:!0});function W(e,...t){return t.length===0&&(t=[j()]),D(r=>(w(S(t)).forEach(n=>n&&fe(n,F.bind(void 0,r))),e(r)),t[0])}M(W,"createSubRoot");function ge(e,...t){return W(r=>(e(r),r),...t)}M(ge,"createDisposable");function q(e){let t=0,r,n;return()=>(n||D(s=>{r=e(s),n=s}),t++,j()&&F(()=>{t--,queueMicrotask(()=>{t||!n||(n(),n=void 0,r=void 0)})}),r)}M(q,"createSharedRoot");var ye=Object.defineProperty,h=(e,t)=>ye(e,"name",{value:t,configurable:!0}),B={passive:!0},Ee={x:0,y:0,isInside:!1,sourceType:null},we={x:0,y:0,top:0,left:0,width:0,height:0,isInside:!1};function Q(e=window,t,r={}){const{touch:n=!0,followTouch:s=!0}=r,[o,i]=P(e,B),a=h(u=>t({x:u.pageX,y:u.pageY,sourceType:"mouse"}),"handleMouse");if(o("mousemove",a),o("dragover",a),n){const u=h(p=>{p.touches.length&&t({x:p.touches[0].clientX,y:p.touches[0].clientY,sourceType:"touch"})},"handleTouch");o("touchstart",u),s&&o("touchmove",u)}return i}h(Q,"makeMousePositionListener");function z(e=window,t,r={}){const{touch:n=!0}=r,[s,o]=P(e,B);let i=!1,a=!n;function u(p){this==="mouse"?i=p:a=p,t(i||a)}return h(u,"handleChange"),s("mouseover",u.bind("mouse",!0)),s("mouseout",u.bind("mouse",!1)),s("mousemove",u.bind("mouse",!0),{passive:!0,once:!0}),n&&(s("touchstart",u.bind("touch",!0)),s("touchend",u.bind("touch",!1))),o}h(z,"makeMouseInsideListener");var Se=h((e,t,r)=>{const n=r.getBoundingClientRect(),s=n.top+window.scrollY,o=n.left+window.scrollX,i=e-o,a=t-s,{width:u,height:p}=n;return{x:i,y:a,top:s,left:o,width:u,height:p,isInside:i>=0&&a>=0&&i<=u&&a<=p}},"getPositionToElement");function C(e,t={}){const[r,n]=U({...Ee,...t.initialValue}),s=h(o=>{Q(o,n,t),z(o,n.bind(void 0,"isInside"),t)},"attachListeners");return typeof e!="function"?s(e):N(()=>s(e())),r}h(C,"createMousePosition");C.bind(void 0,void 0,void 0);function xe(e,t,r={}){const n={...we,...r.initialValue},s=h(u=>{const{x:p,y:H}=t();return Se(p,H,u)},"calcState"),o=typeof e=="function"?()=>{const u=e();return u?s(u):n}:s.bind(void 0,e),[i,a]=U(n);return Z(()=>a(o())),typeof e=="function"&&ee(()=>a(o())),i}h(xe,"createPositionToElement");const Le=L('<div><div class="ball bg-green-500"></div><p class="font-bold text-green-500 opacity-50">normal</p><p class="font-bold text-yellow-600 opacity-50">debounced</p><p class="font-bold text-cyan-500 opacity-50">throttled</p></div>'),Te=L('<div class="ball bg-yellow-600"></div>'),_e=L('<div class="ball bg-cyan-500"></div>'),$e=()=>{const e=C(),t=se([()=>e.x,()=>e.y],([n,s])=>({x:n,y:s}),200),r=oe(()=>({x:e.x,y:e.y}),200);return(()=>{const n=Le.cloneNode(!0),s=n.firstChild,o=s.nextSibling;return I(n,O(A,{get when(){return t()},keyed:!0,children:({x:i,y:a})=>(()=>{const u=Te.cloneNode(!0);return u.style.setProperty("transform",`translate(${i}px, ${a}px)`),u})()}),o),I(n,O(A,{get when(){return r()},keyed:!0,children:({x:i,y:a})=>(()=>{const u=_e.cloneNode(!0);return u.style.setProperty("transform",`translate(${i}px, ${a}px)`),u})()}),o),R(()=>s.style.setProperty("transform",`translate(${e.x}px, ${e.y}px)`)),n})()};export{$e as default};
