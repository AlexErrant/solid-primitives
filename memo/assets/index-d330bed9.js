import{h,o as b,c as d,u as f,k as S,l as p,m as v,n as g,r as M,a as j}from"./index-262c28ff.js";var O=(e,t)=>{let c;const o=()=>clearTimeout(c);return h()&&b(o),Object.assign((...s)=>{c!==void 0&&o(),c=setTimeout(()=>e(...s),t)},{clear:o})},w=(e,t)=>{let c=!1,o,r;const s=(...n)=>{r=n,!c&&(c=!0,o=setTimeout(()=>{e(...r),c=!1},t))},a=()=>{clearTimeout(o),c=!1};return h()&&b(a),Object.assign(s,{clear:a})},T=()=>{};function x(e){return e!==null&&(typeof e=="object"||typeof e=="function")}function y(e,...t){return typeof e=="function"?e(...t):e}var A=b,I=()=>{let e=[];const t=()=>e=[];return{push:(...c)=>e.push(...c),execute(c,o,r,s){e.forEach(a=>a(c,o,r,s)),t()},clear:t}};function L(e){const t={...e},c={...e},o=new Map,r=n=>{const i=o.get(n);if(i)return i[0]();const u=d(t[n],{internal:!0});return o.set(n,u),delete t[n],u[0]()},s=(n,i)=>{const u=o.get(n);if(u)return u[1](i);n in t&&(t[n]=y(i,[t[n]]))};for(const n in e)Object.defineProperty(c,n,{get:r.bind(void 0,n)});return[c,(n,i)=>{if(x(n)){const u=f(()=>Object.entries(y(n,c)));S(()=>{for(const[l,m]of u)s(l,()=>m)})}else s(n,i);return c}]}const C=(e,t)=>e.length>0?()=>e(f(t)):e;function z(e,t){const c=h(),o=new Set;let r=0,s=!1;return b(()=>{for(const a of o)a();o.clear(),s=!0}),a=>{if(s){f(a);return}r++,j(n=>{o.add(n);let i=!0;v(()=>{if(i)return i=!1,a();--r===0&&f(e),n(),o.delete(n)},t)},c)}}function W(e,t){let c=0;const o=e.map((r,s)=>p(()=>(c=s,r())));return p(()=>o.map(r=>r())[c],void 0,t)}function R(e,t,c){let o=()=>t;const[r,s]=d(t),a=p(C(e,()=>o()),t);return[o=W([r,a],c),n=>s(()=>typeof n=="function"?n(f(o)):n)]}function V(e,t,c,o,r){let s=!0;const[a,n]=d((()=>{let u;return v(g(e,(l,m)=>{s?(u=t(l,m,o),s=!1):i(l,m)})),u})(),r),i=O((u,l)=>{n(()=>t(u,l,a()))},c);return a}function k(e,t,c,o){let r=T;const s=z(()=>r()),[a,n]=d((()=>{let i;return s(()=>i=e(c)),i})(),o);return r=w(()=>s(()=>n(e)),t),a}function q(e,t={}){const[c,o]=d(t.value,t),r=[];return v(async()=>{const s=e(f(c));s instanceof Promise?(r.push(s),s.then(a=>r.includes(s)&&o(()=>a)),s.finally(()=>{const a=r.indexOf(s);r.splice(0,a+1)})):o(()=>s)},void 0),c}function D(e,t,c){let o=!0;const[r,s]=d({v:!1}),a=p(n=>r().v?(o=r().v=!1,e(n)):(o=!0,n),t,{equals:!1,name:c?.name});return()=>(o&&s({v:!0}),a())}function E(...e){const t=new Map,c=h(),o=typeof e[1]=="function"?e[0]:void 0,r=typeof e[1]=="function"?e[1]:e[0],s=typeof e[1]=="object"?e[1]:typeof e[2]=="object"?e[2]:{},a=n=>{if(t.has(n))return t.get(n)();const i=M(c,()=>D(u=>r(n,u),void 0,s));return(s.size===void 0||t.size<s.size)&&t.set(n,i),i()};return o?()=>a(o()):a}export{q as a,I as b,D as c,L as d,V as e,k as f,E as g,R as h,A as t};
