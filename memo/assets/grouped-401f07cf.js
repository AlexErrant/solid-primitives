import{o as h,s as g,a as m,h as y,e as S,i as d,b as f,S as p,j as $,t as l}from"./index-11064b72.js";import{t as w,b as k,d as _,e as E,f as P}from"./index-2de3c5c0.js";function L(e,o,s,n){return e.addEventListener(o,s,n),w(e.removeEventListener.bind(e,o,s,n))}function b(e,o){const{push:s,execute:n}=k();return[(t,a,c)=>{const u=L(e,t,a,c??o);return s(u),u},h(n)]}function M(e,o=y()){let s=0,n,t;return()=>(s++,h(()=>{s--,queueMicrotask(()=>{!s&&t&&(t(),t=n=void 0)})}),t||m(a=>n=e(t=a),o),n)}function T(e){const o=y(),s=M(e,o);return()=>g.context?m(e,o):s()}var v={passive:!0},C={x:0,y:0,isInside:!1,sourceType:null};function I(e=window,o,s={}){const{touch:n=!0,followTouch:t=!0}=s,[a,c]=b(e,v),u=r=>o({x:r.pageX,y:r.pageY,sourceType:"mouse"});if(a("mousemove",u),a("dragover",u),n){const r=i=>{i.touches.length&&o({x:i.touches[0].clientX,y:i.touches[0].clientY,sourceType:"touch"})};a("touchstart",r),t&&a("touchmove",r)}return c}function O(e=window,o,s={}){const{touch:n=!0}=s,[t,a]=b(e,v);let c=!1,u=!n;function r(i){this==="mouse"?c=i:u=i,o(c||u)}return t("mouseover",r.bind("mouse",!0)),t("mouseout",r.bind("mouse",!1)),t("mousemove",r.bind("mouse",!0),{passive:!0,once:!0}),n&&(t("touchstart",r.bind("touch",!0)),t("touchend",r.bind("touch",!1))),a}function x(e,o={}){const s={...C,...o.initialValue},[n,t]=_(s),a=c=>{I(c,t,o),O(c,t.bind(void 0,"isInside"),o)};return typeof e!="function"?a(e):S(()=>a(e())),n}x.bind(void 0,void 0,void 0);const R=l('<div><div class="ball bg-green-500"></div><p class="font-bold text-green-500 opacity-50">normal</p><p class="font-bold text-yellow-600 opacity-50">debounced</p><p class="font-bold text-cyan-500 opacity-50">throttled'),A=l('<div class="ball bg-yellow-600">'),D=l('<div class="ball bg-cyan-500">'),X=()=>{const e=x(),o=E([()=>e.x,()=>e.y],([n,t])=>({x:n,y:t}),200),s=P(()=>({x:e.x,y:e.y}),200);return(()=>{const n=R(),t=n.firstChild,a=t.nextSibling;return d(n,f(p,{get when(){return o()},keyed:!0,children:({x:c,y:u})=>(()=>{const r=A();return r.style.setProperty("transform",`translate(${c}px, ${u}px)`),r})()}),a),d(n,f(p,{get when(){return s()},keyed:!0,children:({x:c,y:u})=>(()=>{const r=D();return r.style.setProperty("transform",`translate(${c}px, ${u}px)`),r})()}),a),$(()=>t.style.setProperty("transform",`translate(${e.x}px, ${e.y}px)`)),n})()};export{X as default};
