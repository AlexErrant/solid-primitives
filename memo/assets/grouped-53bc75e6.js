import{o as m,s as $,a as b,h as v,u as w,j as P,k as _,c as E,e as L,i as d,b as f,S as p,l as O,t as l}from"./index-14c14c63.js";import{t as M,b as T,i as k,d as h,e as C,f as I}from"./index-d3209fd9.js";function R(t,n,r,o){return t.addEventListener(n,r,o),M(t.removeEventListener.bind(t,n,r,o))}function y(t,n){const{push:r,execute:o}=T();return[(s,u,e)=>{const a=R(t,s,u,e??n);return r(a),a},m(o)]}function j(t,n=v()){let r=0,o,s;return()=>(r++,m(()=>{r--,queueMicrotask(()=>{!r&&s&&(s(),s=o=void 0)})}),s||b(u=>o=t(s=u),n),o)}function V(t){const n=v(),r=j(t,n);return()=>$.context?b(t,n):r()}function A(t){const n={...t},r={...t},o={},s=e=>{let a=o[e];if(!a){if(!_())return n[e];o[e]=a=E(n[e],{internal:!0}),delete n[e]}return a[0]()};for(const e in t)Object.defineProperty(r,e,{get:()=>s(e),enumerable:!0});const u=(e,a)=>{const c=o[e];if(c)return c[1](a);e in n&&(n[e]=h(a,[n[e]]))};return[r,(e,a)=>{if(k(e)){const c=w(()=>Object.entries(h(e,r)));P(()=>{for(const[i,S]of c)u(i,()=>S)})}else u(e,a);return r}]}var g={passive:!0},D={x:0,y:0,isInside:!1,sourceType:null};function U(t=window,n,r={}){const{touch:o=!0,followTouch:s=!0}=r,[u,e]=y(t,g),a=c=>n({x:c.pageX,y:c.pageY,sourceType:"mouse"});if(u("mousemove",a),u("dragover",a),o){const c=i=>{i.touches.length&&n({x:i.touches[0].clientX,y:i.touches[0].clientY,sourceType:"touch"})};u("touchstart",c),s&&u("touchmove",c)}return e}function X(t=window,n,r={}){const{touch:o=!0}=r,[s,u]=y(t,g);let e=!1,a=!o;function c(i){this==="mouse"?e=i:a=i,n(e||a)}return s("mouseover",c.bind("mouse",!0)),s("mouseout",c.bind("mouse",!1)),s("mousemove",c.bind("mouse",!0),{passive:!0,once:!0}),o&&(s("touchstart",c.bind("touch",!0)),s("touchend",c.bind("touch",!1))),u}function x(t,n={}){const r={...D,...n.initialValue},[o,s]=A(r),u=e=>{U(e,s,n),X(e,s.bind(void 0,"isInside"),n)};return typeof t!="function"?u(t):L(()=>u(t())),o}x.bind(void 0,void 0,void 0);const Y=l('<div><div class="ball bg-green-500"></div><p class="font-bold text-green-500 opacity-50">normal</p><p class="font-bold text-yellow-600 opacity-50">debounced</p><p class="font-bold text-cyan-500 opacity-50">throttled'),q=l('<div class="ball bg-yellow-600">'),F=l('<div class="ball bg-cyan-500">'),N=()=>{const t=x(),n=C([()=>t.x,()=>t.y],([o,s])=>({x:o,y:s}),200),r=I(()=>({x:t.x,y:t.y}),200);return(()=>{const o=Y(),s=o.firstChild,u=s.nextSibling;return d(o,f(p,{get when(){return n()},keyed:!0,children:({x:e,y:a})=>(()=>{const c=q();return c.style.setProperty("transform",`translate(${e}px, ${a}px)`),c})()}),u),d(o,f(p,{get when(){return r()},keyed:!0,children:({x:e,y:a})=>(()=>{const c=F();return c.style.setProperty("transform",`translate(${e}px, ${a}px)`),c})()}),u),O(()=>s.style.setProperty("transform",`translate(${t.x}px, ${t.y}px)`)),o})()};export{N as default};
