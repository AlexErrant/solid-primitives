(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const t of o.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&l(t)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const b={},Ae=(e,i)=>e===i,_e=Symbol("solid-track"),Q={equals:Ae};let L=null,xe=pe;const O=1,Y=2,me={owned:null,cleanups:null,context:null,owner:null},se={};var w=null;let q=null,$=null,S=null,M=null,ee=0;function G(e,i){const n=$,l=w,s=e.length===0,o=s?me:{owned:null,cleanups:null,context:null,owner:i===void 0?l:i},t=s?e:()=>e(()=>D(()=>te(o)));w=o,$=null;try{return I(t,!0)}finally{$=n,w=l}}function A(e,i){i=i?Object.assign({},Q,i):Q;const n={value:e,observers:null,observerSlots:null,comparator:i.equals||void 0},l=s=>(typeof s=="function"&&(s=s(n.value)),ve(n,s));return[be.bind(n),l]}function fe(e,i,n){const l=ce(e,i,!0,O);J(l)}function U(e,i,n){const l=ce(e,i,!1,O);J(l)}function B(e,i,n){n=n?Object.assign({},Q,n):Q;const l=ce(e,i,!0,0);return l.observers=null,l.observerSlots=null,l.comparator=n.equals||void 0,J(l),be.bind(l)}function X(e,i,n){let l,s,o;arguments.length===2&&typeof i=="object"||arguments.length===1?(l=!0,s=e,o=i||{}):(l=e,s=i,o=n||{});let t=null,r=se,f=null,u=!1,c="initialValue"in o,a=typeof l=="function"&&B(l);const d=new Set,[g,y]=(o.storage||A)(o.initialValue),[h,_]=A(void 0),[x,v]=A(void 0,{equals:!1}),[k,N]=A(c?"ready":"unresolved");if(b.context){f=`${b.context.id}${b.context.count++}`;let m;o.ssrLoadFrom==="initial"?r=o.initialValue:b.load&&(m=b.load(f))&&(r=m[0])}function C(m,E,p,R){return t===m&&(t=null,c=!0,(m===r||E===r)&&o.onHydrated&&queueMicrotask(()=>o.onHydrated(R,{value:E})),r=se,ne(E,p)),E}function ne(m,E){I(()=>{E===void 0&&y(()=>m),N(E!==void 0?"errored":"ready"),_(E);for(const p of d.keys())p.decrement();d.clear()},!1)}function ie(){const m=je,E=g(),p=h();if(p!==void 0&&!t)throw p;return $&&!$.user&&m&&fe(()=>{x(),t&&(m.resolved||d.has(m)||(m.increment(),d.add(m)))}),E}function re(m=!0){if(m!==!1&&u)return;u=!1;const E=a?a():l;if(E==null||E===!1){C(t,D(g));return}const p=r!==se?r:D(()=>s(E,{value:g(),refetching:m}));return typeof p!="object"||!(p&&"then"in p)?(C(t,p,void 0,E),p):(t=p,u=!0,queueMicrotask(()=>u=!1),I(()=>{N(c?"refreshing":"pending"),v()},!1),p.then(R=>C(p,R,void 0,E),R=>C(p,void 0,Te(R),E)))}return Object.defineProperties(ie,{state:{get:()=>k()},error:{get:()=>h()},loading:{get(){const m=k();return m==="pending"||m==="refreshing"}},latest:{get(){if(!c)return ie();const m=h();if(m&&!t)throw m;return g()}}}),a?fe(()=>re(!1)):re(!1),[ie,{refetch:re,mutate:y}]}function Ne(e){return I(e,!1)}function D(e){if($===null)return e();const i=$;$=null;try{return e()}finally{$=i}}function $e(e){return w===null||(w.cleanups===null?w.cleanups=[e]:w.cleanups.push(e)),e}function ue(e){L||(L=Symbol("error")),w===null||(w.context===null?w.context={[L]:[e]}:w.context[L]?w.context[L].push(e):w.context[L]=[e])}let je;function be(){const e=q;if(this.sources&&(this.state||e))if(this.state===O||e)J(this);else{const i=S;S=null,I(()=>Z(this),!1),S=i}if($){const i=this.observers?this.observers.length:0;$.sources?($.sources.push(this),$.sourceSlots.push(i)):($.sources=[this],$.sourceSlots=[i]),this.observers?(this.observers.push($),this.observerSlots.push($.sources.length-1)):(this.observers=[$],this.observerSlots=[$.sources.length-1])}return this.value}function ve(e,i,n){let l=e.value;return(!e.comparator||!e.comparator(l,i))&&(e.value=i,e.observers&&e.observers.length&&I(()=>{for(let s=0;s<e.observers.length;s+=1){const o=e.observers[s],t=q&&q.running;t&&q.disposed.has(o),(t&&!o.tState||!t&&!o.state)&&(o.pure?S.push(o):M.push(o),o.observers&&Se(o)),t||(o.state=O)}if(S.length>1e6)throw S=[],new Error},!1)),i}function J(e){if(!e.fn)return;te(e);const i=w,n=$,l=ee;$=w=e,Ce(e,e.value,l),$=n,w=i}function Ce(e,i,n){let l;try{l=e.fn(i)}catch(s){return e.pure&&(e.state=O,e.owned&&e.owned.forEach(te),e.owned=null),e.updatedAt=n+1,ke(s)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?ve(e,l):e.value=l,e.updatedAt=n)}function ce(e,i,n,l=O,s){const o={fn:e,state:l,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:i,owner:w,context:null,pure:n};return w===null||w!==me&&(w.owned?w.owned.push(o):w.owned=[o]),o}function Ee(e){const i=q;if(e.state===0||i)return;if(e.state===Y||i)return Z(e);if(e.suspense&&D(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ee);)(e.state||i)&&n.push(e);for(let l=n.length-1;l>=0;l--)if(e=n[l],e.state===O||i)J(e);else if(e.state===Y||i){const s=S;S=null,I(()=>Z(e,n[0]),!1),S=s}}function I(e,i){if(S)return e();let n=!1;i||(S=[]),M?n=!0:M=[],ee++;try{const l=e();return Pe(n),l}catch(l){n||(M=null),S=null,ke(l)}}function Pe(e){if(S&&(pe(S),S=null),e)return;const i=M;M=null,i.length&&I(()=>xe(i),!1)}function pe(e){for(let i=0;i<e.length;i++)Ee(e[i])}function Z(e,i){const n=q;e.state=0;for(let l=0;l<e.sources.length;l+=1){const s=e.sources[l];s.sources&&(s.state===O||n?s!==i&&(!s.updatedAt||s.updatedAt<ee)&&Ee(s):(s.state===Y||n)&&Z(s,i))}}function Se(e){const i=q;for(let n=0;n<e.observers.length;n+=1){const l=e.observers[n];(!l.state||i)&&(l.state=Y,l.pure?S.push(l):M.push(l),l.observers&&Se(l))}}function te(e){let i;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),l=e.sourceSlots.pop(),s=n.observers;if(s&&s.length){const o=s.pop(),t=n.observerSlots.pop();l<s.length&&(o.sourceSlots[t]=l,s[l]=o,n.observerSlots[l]=t)}}if(e.owned){for(i=0;i<e.owned.length;i++)te(e.owned[i]);e.owned=null}if(e.cleanups){for(i=0;i<e.cleanups.length;i++)e.cleanups[i]();e.cleanups=null}e.state=0,e.context=null}function Te(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function de(e,i){for(const n of e)n(i)}function ke(e){e=Te(e);const i=L&&Fe(w,L);if(!i)throw e;M?M.push({fn(){de(i,e)},state:O}):de(i,e)}function Fe(e,i){return e?e.context&&e.context[i]!==void 0?e.context[i]:Fe(e.owner,i):void 0}const Me=Symbol("fallback");function ae(e){for(let i=0;i<e.length;i++)e[i]()}function Oe(e,i,n={}){let l=[],s=[],o=[],t=0,r=i.length>1?[]:null;return $e(()=>ae(o)),()=>{let f=e()||[],u,c;return f[_e],D(()=>{let d=f.length,g,y,h,_,x,v,k,N,C;if(d===0)t!==0&&(ae(o),o=[],l=[],s=[],t=0,r&&(r=[])),n.fallback&&(l=[Me],s[0]=G(ne=>(o[0]=ne,n.fallback())),t=1);else if(t===0){for(s=new Array(d),c=0;c<d;c++)l[c]=f[c],s[c]=G(a);t=d}else{for(h=new Array(d),_=new Array(d),r&&(x=new Array(d)),v=0,k=Math.min(t,d);v<k&&l[v]===f[v];v++);for(k=t-1,N=d-1;k>=v&&N>=v&&l[k]===f[N];k--,N--)h[N]=s[k],_[N]=o[k],r&&(x[N]=r[k]);for(g=new Map,y=new Array(N+1),c=N;c>=v;c--)C=f[c],u=g.get(C),y[c]=u===void 0?-1:u,g.set(C,c);for(u=v;u<=k;u++)C=l[u],c=g.get(C),c!==void 0&&c!==-1?(h[c]=s[u],_[c]=o[u],r&&(x[c]=r[u]),c=y[c],g.set(C,c)):o[u]();for(c=v;c<d;c++)c in h?(s[c]=h[c],o[c]=_[c],r&&(r[c]=x[c],r[c](c))):s[c]=G(a);s=s.slice(0,t=d),l=f.slice(0)}return s});function a(d){if(o[c]=d,r){const[g,y]=A(c);return r[c]=y,i(f[c],g)}return i(f[c])}}}function j(e,i){return D(()=>e(i||{}))}function Le(e){const i="fallback"in e&&{fallback:()=>e.fallback};return B(Oe(()=>e.each,e.children,i||void 0))}function W(e){let i=!1;const n=e.keyed,l=B(()=>e.when,void 0,{equals:(s,o)=>i?s===o:!s==!o});return B(()=>{const s=l();if(s){const o=e.children,t=typeof o=="function"&&o.length>0;return i=n||t,t?D(()=>o(s)):o}return e.fallback},void 0,void 0)}let K;function De(e){let i,n;b.context&&b.load&&(n=b.load(b.context.id+b.context.count))&&(i=n[0]);const[l,s]=A(i,void 0);return K||(K=new Set),K.add(s),$e(()=>K.delete(s)),B(()=>{let o;if(o=l()){const t=e.fallback,r=typeof t=="function"&&t.length?D(()=>t(o,()=>s())):t;return ue(s),r}return ue(s),e.children},void 0,void 0)}function Ie(e,i,n){let l=n.length,s=i.length,o=l,t=0,r=0,f=i[s-1].nextSibling,u=null;for(;t<s||r<o;){if(i[t]===n[r]){t++,r++;continue}for(;i[s-1]===n[o-1];)s--,o--;if(s===t){const c=o<l?r?n[r-1].nextSibling:n[o-r]:f;for(;r<o;)e.insertBefore(n[r++],c)}else if(o===r)for(;t<s;)(!u||!u.has(i[t]))&&i[t].remove(),t++;else if(i[t]===n[o-1]&&n[r]===i[s-1]){const c=i[--s].nextSibling;e.insertBefore(n[r++],i[t++].nextSibling),e.insertBefore(n[--o],c),i[s]=n[o]}else{if(!u){u=new Map;let a=r;for(;a<o;)u.set(n[a],a++)}const c=u.get(i[t]);if(c!=null)if(r<c&&c<o){let a=t,d=1,g;for(;++a<s&&a<o&&!((g=u.get(i[a]))==null||g!==c+d);)d++;if(d>c-r){const y=i[t];for(;r<c;)e.insertBefore(n[r++],y)}else e.replaceChild(n[r++],i[t++])}else t++;else i[t++].remove()}}}const ge="_$DX_DELEGATE";function He(e,i,n,l={}){let s;return G(o=>{s=o,i===document?e():P(i,e(),i.firstChild?null:void 0,n)},l.owner),()=>{s(),i.textContent=""}}function T(e,i,n){const l=document.createElement("template");if(l.innerHTML=e,i&&l.innerHTML.split("<").length-1!==i)throw`The browser resolved template HTML does not match JSX input:
${l.innerHTML}

${e}. Is your HTML properly formed?`;let s=l.content.firstChild;return n&&(s=s.firstChild),s}function qe(e,i=window.document){const n=i[ge]||(i[ge]=new Set);for(let l=0,s=e.length;l<s;l++){const o=e[l];n.has(o)||(n.add(o),i.addEventListener(o,Ve))}}function Be(e,i,n,l){if(l)Array.isArray(n)?(e[`$$${i}`]=n[0],e[`$$${i}Data`]=n[1]):e[`$$${i}`]=n;else if(Array.isArray(n)){const s=n[0];e.addEventListener(i,n[0]=o=>s.call(e,n[1],o))}else e.addEventListener(i,n)}function P(e,i,n,l){if(n!==void 0&&!l&&(l=[]),typeof i!="function")return z(e,i,l,n);U(s=>z(e,i(),s,n),l)}function Ve(e){const i=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}}),b.registry&&!b.done&&(b.done=!0,document.querySelectorAll("[id^=pl-]").forEach(l=>{for(;l&&l.nodeType!==8&&l.nodeValue!=="pl-"+e;){let s=l.nextSibling;l.remove(),l=s}l&&l.remove()}));n;){const l=n[i];if(l&&!n.disabled){const s=n[`${i}Data`];if(s!==void 0?l.call(n,s,e):l.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function z(e,i,n,l,s){for(b.context&&!n&&(n=[...e.childNodes]);typeof n=="function";)n=n();if(i===n)return n;const o=typeof i,t=l!==void 0;if(e=t&&n[0]&&n[0].parentNode||e,o==="string"||o==="number"){if(b.context)return n;if(o==="number"&&(i=i.toString()),t){let r=n[0];r&&r.nodeType===3?r.data=i:r=document.createTextNode(i),n=V(e,n,l,r)}else n!==""&&typeof n=="string"?n=e.firstChild.data=i:n=e.textContent=i}else if(i==null||o==="boolean"){if(b.context)return n;n=V(e,n,l)}else{if(o==="function")return U(()=>{let r=i();for(;typeof r=="function";)r=r();n=z(e,r,n,l)}),()=>n;if(Array.isArray(i)){const r=[],f=n&&Array.isArray(n);if(le(r,i,n,s))return U(()=>n=z(e,r,n,l,!0)),()=>n;if(b.context){if(!r.length)return n;for(let u=0;u<r.length;u++)if(r[u].parentNode)return n=r}if(r.length===0){if(n=V(e,n,l),t)return n}else f?n.length===0?ye(e,r,l):Ie(e,n,r):(n&&V(e),ye(e,r));n=r}else if(i instanceof Node){if(b.context&&i.parentNode)return n=t?[i]:i;if(Array.isArray(n)){if(t)return n=V(e,n,l,i);V(e,n,null,i)}else n==null||n===""||!e.firstChild?e.appendChild(i):e.replaceChild(i,e.firstChild);n=i}else console.warn("Unrecognized value. Skipped inserting",i)}return n}function le(e,i,n,l){let s=!1;for(let o=0,t=i.length;o<t;o++){let r=i[o],f=n&&n[o];if(r instanceof Node)e.push(r);else if(!(r==null||r===!0||r===!1))if(Array.isArray(r))s=le(e,r,f)||s;else if(typeof r=="function")if(l){for(;typeof r=="function";)r=r();s=le(e,Array.isArray(r)?r:[r],Array.isArray(f)?f:[f])||s}else e.push(r),s=!0;else{const u=String(r);f&&f.nodeType===3&&f.data===u?e.push(f):e.push(document.createTextNode(u))}}return s}function ye(e,i,n=null){for(let l=0,s=i.length;l<s;l++)e.insertBefore(i[l],n)}function V(e,i,n,l){if(n===void 0)return e.textContent="";const s=l||document.createTextNode("");if(i.length){let o=!1;for(let t=i.length-1;t>=0;t--){const r=i[t];if(s!==r){const f=r.parentNode===e;!o&&!t?f?e.replaceChild(s,r):e.insertBefore(s,n):f&&r.remove()}else o=!0}}else e.insertBefore(s,n);return[s]}const Re=()=>({async:!0,getType:()=>Promise.resolve(null),mkdir:()=>Promise.resolve(),readdir:()=>Promise.resolve([]),readFile:()=>Promise.resolve(""),rename:()=>Promise.resolve(),rm:()=>Promise.resolve(),writeFile:()=>Promise.resolve()}),F=e=>e.split("/").slice(0,-1).join("/")||"/",H=e=>e.split("/").at(-1),We=typeof globalThis.showDirectoryPicker=="function"?async e=>{const i=await globalThis.showDirectoryPicker(e),n=async(s,o)=>{const t=s.split("/").filter(f=>f);let r=i;for(let f=0;f<t.length;f++){const u=t[f];if(r=await o(r,u,f,t)||void 0,!r)return}return r},l=(s,o)=>s.kind==="directory"?s.getDirectoryHandle(o).catch(()=>s.getFileHandle(o)).catch(()=>{}):void 0;return{async:!0,getType:async s=>n(s,l).then(o=>o?.kind==="directory"?"dir":o?.kind||null).catch(()=>null),readdir:async s=>n(s,l).then(async o=>{if(o?.kind!=="directory")return[];const t=[];for await(const r of o.keys())t.push(r);return t}),mkdir:async s=>{await n(s,(o,t,r,f)=>o.kind==="file"?Promise.reject(new Error(`attempt to create directory "${s}" failed - "${f.slice(0,r).join("/")} is a file`)):o.getDirectoryHandle(t,{create:!0}))},readFile:async s=>await n(s,(o,t,r,f)=>r<f.length-1?l(o,t):o.kind==="directory"?o.getFileHandle(t):void 0).then(o=>o?.kind==="file"?o.getFile().then(t=>t.text()):Promise.reject(`reading file "${s}" failed - not a file`)),writeFile:async(s,o)=>void await n(s,(t,r,f,u)=>f<u.length-1?l(t,r):t.kind==="directory"?t.getFileHandle(r,{create:!0}).then(c=>c.createWritable().then(a=>a.write(o).then(()=>a.close())).then(()=>c)):Promise.reject(new Error(`could not write file ${s}, since path is no parent directory`))),rm:async s=>void await n(s,(o,t,r,f)=>r<f.length-1?l(o,t):o.kind==="directory"?o.removeEntry(t,{recursive:!0}):Promise.reject(new Error(`${s} not found; could not be removed`)))}}:()=>Promise.resolve(Re()),Ue=(e,i,n="solid-primitive-filesystem")=>{let l;const s=i?.getItem(n);try{l=JSON.parse(typeof s=="string"?s:"null")}catch{}let o=l||e||{};s instanceof Promise&&s.then(c=>{o=Object.assign(c||{},o)});const t=()=>i?.setItem(n,JSON.stringify(o));t();const r=(c,a)=>{let d=o;return c=c.startsWith("/")?c.slice(1):c,c.split("/").forEach((g,y,h)=>{d=g?a(d,g,y,h):d}),d};function f(c=(a,d)=>[a,d]){const a=[],d=(g=o||{},y="/")=>{typeof g=="object"&&Object.keys(g).forEach(h=>typeof g[h]=="string"?a.push(c(`${y}${h}`,g[h])):d(g[h],`${y}${h}/`))};return d(),a}const u={async:!1,getType:c=>{if(c===""||c==="/")return"dir";const a=r(c,(d,g)=>typeof d=="object"?d[g]:void 0);return a===void 0?null:typeof a=="string"?"file":"dir"},mkdir:c=>(r(c,(a,d,g,y)=>{if(typeof a!="object")throw new Error(`"${y.slice(0,g).join("/")}" is not a directory`);if(a[d]===void 0)a[d]={};else if(typeof a[d]=="string")throw new Error(`Cannot overwrite file ${y.slice(0,g+1).join("/")} with path`);return a[d]}),t()),readdir:c=>{const a=r(c.replace(/^\/$/,""),(d,g,y,h)=>{if(typeof d!="object")throw new Error(`"${h.slice(0,y).join("/")}" is not a directory`);return y===0&&g===""?d:d=d[g]});if(typeof a!="object")throw new Error(`"${c}" is not a directory`);return Object.keys(a)},rename:(c,a)=>{let d;const g=r(c,(y,h,_,x)=>{if(typeof y!="object")throw new Error(`"${x.slice(0,_).join("/")}" is not a directory`);if(_+1>=x.length){if(y[h]===void 0)throw new Error(`${c} does not exist and therefore cannot be renamed`);d=h}return y[h]});r(a,(y,h,_,x)=>{if(typeof y!="object")throw new Error(`"${x.slice(0,_).join("/")}" is not a directory`);return _+1>=x.length&&Object.keys(y).forEach(v=>{v===d?(y[h]=g,delete y[v]):y[v]=y[v]}),y[h]})},rm:c=>void r(c,(a,d,g,y)=>{if(typeof a!="object")throw new Error(`"${y.slice(0,g).join("/")}" is not a directory`);return g+1===y.length?(delete a[d],t()):a=a[d],a}),readFile:c=>r(c,(a,d,g,y)=>{if(typeof a!="object")throw new Error(`"${y.slice(0,g).join("/")}" is not a directory`);if(a=a[d],g+1===y.length&&typeof a!="string")throw new Error(`"${c}" is not a file`);return a}),writeFile:(c,a)=>void r(c,(d,g,y,h)=>{if(typeof d!="object")throw new Error(`"${h.slice(0,y).join("/")}" is not a directory`);if(y+1===h.length){if(typeof d[g]=="object")throw new Error(`"${c}" is a directory and cannot be overwritten with a file`);d[g]=a,t()}else return d=d[g]}),toMap:()=>{const c={clear:()=>u.rm("/"),delete:a=>u.getType(a)==="file"&&u.rm(a),entries:()=>f()[Symbol.iterator](),forEach:a=>{f().forEach(([d,g])=>a(g,d,c))},get:a=>{try{return u.readFile(a)}catch{}},has:a=>u.getType(a)==="file",keys:()=>f(a=>a)[Symbol.iterator](),set:(a,d)=>{const g=F(a);return u.getType(g)!=="dir"&&u.mkdir(g),u.writeFile(a,d),c},get size(){return f().length},values:()=>f((a,d)=>d)[Symbol.iterator](),[Symbol.iterator]:()=>c.entries(),[Symbol.toStringTag]:"Map"};return c}};return u},Je=(e,i)=>{const n=new Map,l=new Map,s=new Map,o={getType:(t,r)=>{n.has(t)||n.set(t,A());const[f,u]=n.get(t);return(r||f()===void 0)&&u(e.getType(t)),f()},readdir:(t,r)=>{l.has(t)||l.set(t,A());const[f,u]=l.get(t);return(r||f()===void 0)&&u(e.readdir(t)),f()},mkdir:t=>{e.mkdir(t),l.get(F(t))?.[1]((r=[])=>[...r,t])},readFile:(t,r)=>{s.has(t)||s.set(t,A());const[f,u]=s.get(t);return(r||f()===void 0)&&u(e.readFile(t)),f()},writeFile:(t,r)=>{const f=e.getType(t)===null;e.writeFile(t,r),s.get(t)?.[1](r),f&&(o.getType(t,!0),l.get(F(t))?.[1]((u=[])=>[...u,H(t)]))},rename:(t,r)=>{const f=e.getType(t),u=e.getType(r);if(f==="dir"&&u==="file")throw new Error(`Cannot overwrite file "${r}" with directory "${t}"`);if(f==="file"&&u==="dir")throw new Error(`cannot overwrite directory "${r}" with file "${t}"`);typeof e.rename=="function"?e.rename(t,r):f==="dir"?(u===null&&e.mkdir(r),e.readdir(t).forEach(c=>o.rename(`${t}/${c}`,`${r}/${c}`))):e.writeFile(r,e.readFile(t)),n.get(t)?.[1](void 0),n.delete(t),l.get(F(t))?.[1]((c=[])=>c.filter(a=>a===H(t))),l.get(F(r))?.[1]((c=[])=>[...c,H(r)])},rm:t=>{e.rm(t),n.get(t)?.[1](void 0),n.delete(t),[...l.keys()].forEach(r=>{r.startsWith(`${t}/`)&&(n.get(r)?.[1](void 0),n.delete(r))}),l.get(F(t))?.[1]((r=[])=>r.filter(f=>f===H(t)))}};return i&&i((t,r)=>{(t==="mkdir"||t==="rm")&&l.get(F(r))?.[1]((f=[])=>f.includes(r)?f:[...f,r]),t==="rm"&&n.get(r)?.[1](null),t==="writeFile"&&s.has(r)&&o.readFile(r,!0)}),o},he=(e,i)=>{const n=new Map,l=new Map,s=new Map,o={getType:(t,r)=>{n.has(t)||n.set(t,X(()=>e.getType(t)));const[f,{refetch:u}]=n.get(t);return r&&u(),f()},readdir:(t,r)=>{l.has(t)||l.set(t,X(()=>e.readdir(t)));const[f,{refetch:u}]=l.get(t);return r&&u(),f()},mkdir:t=>e.mkdir(t).then(()=>{t.split("/").forEach((r,f,u)=>{const c=u.slice(0,f+1).join("/");n.has(c)?n.get(c)[1].refetch():o.getType(c)}),l.get(F(t))?.[1].refetch()}),readFile:(t,r)=>{s.has(t)||s.set(t,X(()=>e.readFile(t)));const[f,{refetch:u}]=s.get(t);return r&&u(),f()},writeFile:(t,r)=>e.writeFile(t,r).then(()=>{s.get(t)?.[1].mutate(r);const f=H(t);l.get(F(t))?.[1].mutate((u=[])=>u.includes(f)?u:[...u,f])}),rename:async(t,r)=>{const f=await e.getType(t),u=await e.getType(r);if(f==="dir"&&u==="file")throw new Error(`Cannot overwrite file "${r}" with directory "${t}"`);if(f==="file"&&u==="dir")throw new Error(`cannot overwrite directory "${r}" with file "${t}"`);typeof e.rename=="function"?await e.rename(t,r):(f==="dir"?(u===null&&await e.mkdir(r),(await e.readdir(t)).forEach(c=>o.rename(`${t}/${c}`,`${r}/${c}`))):await e.writeFile(r,await e.readFile(t)),await e.rm(t)),Ne(()=>{n.get(t)?.[1].mutate(void 0),n.delete(t);const c=F(t);l.get(c)?.[1].refetch();const a=F(r);c!==a&&l.get(a)?.[1].refetch()})},rm:t=>e.rm(t).then(()=>{n.get(t)?.[1].mutate(void 0),n.delete(t),[...l.keys()].forEach(r=>{r.startsWith(`${t}/`)&&(n.get(r)?.[1].mutate(void 0),n.delete(r))}),l.get(F(t))?.[1].refetch()})};return i&&i((t,r)=>{(t==="mkdir"||t==="rm")&&l.get(F(r))?.[1].mutate((f=[])=>f.includes(r)?f:[...f,r]),t==="rm"&&n.get(r)?.[1].mutate(null),t==="writeFile"&&s.get(r)?.[1].refetch()}),o};function we(e,i){return e instanceof Promise?e.then(n=>he(n,i)):e.async?he(e,i):Je(e,i)}const Ke=T("<textarea></textarea>",2),Ge=T("<div><p><button></button></p></div>",6),Xe=T("<button>New File</button>",2),Qe=T("<button>New Dir</button>",2),Ye=T("<div><button></button> <!> <input></div>",6),Ze=T("<ul></ul>",2),ze=T("<li></li>",2),et=T("<h4>FileSystem primitive</h4>",2),tt=T("<p>Object virtual file system (localStorage persistence)</p>",2),nt=T("<p>Web Filesystem Access file system</p>",2),it=T("<p><em>Warning!</em> This can overwrite or delete actual files!</p>",4),rt=T('<div class="p-24 box-border w-full min-h-screen flex flex-col justify-center items-center space-y-4 bg-gray-800 text-white"><div class="wrapper-v"><div></div></div></div>',6),st=T("<div>Error: <!> <button>reset</button></div>",5),lt=T("<button>Request directory access</button>",2),ot=e=>{const[i,n]=A(!1),l=B(o=>o||i()?e.fs.readFile(e.path):void 0),s=o=>e.fs.writeFile(e.path,o);return(()=>{const o=Ge.cloneNode(!0),t=o.firstChild,r=t.firstChild;return r.$$click=()=>n(!i()),P(r,()=>i()?"-":"+"),P(t,()=>H(e.path),null),P(o,j(W,{get when(){return i()},get children(){const f=Ke.cloneNode(!0);return f.$$input=u=>s(u.currentTarget.value),U(()=>f.value=l()),f}}),null),o})()},oe=e=>{const[i,n]=A(e.path==="/"),[l,s]=A(""),o=()=>i()&&e.fs.readdir(e.path);return[(()=>{const t=Ye.cloneNode(!0),r=t.firstChild,f=r.nextSibling,u=f.nextSibling,c=u.nextSibling,a=c.nextSibling;return r.$$click=()=>n(!i()),P(r,()=>i()?"-":"+"),P(t,()=>H(e.path)||"/",u),a.$$input=d=>s(d.currentTarget.value),P(t,j(W,{get when(){return l()!==""},get children(){return[(()=>{const d=Xe.cloneNode(!0);return d.$$click=()=>e.fs.writeFile(`${e.path==="/"?"":e.path}/${l()}`,""),d})(),(()=>{const d=Qe.cloneNode(!0);return d.$$click=()=>e.fs.mkdir(`${e.path==="/"?"":e.path}/${l()}`),d})()]}}),null),t})(),j(W,{get when(){return o()!==void 0},get children(){const t=Ze.cloneNode(!0);return P(t,j(Le,{get each(){return o()},children:r=>(()=>{const f=ze.cloneNode(!0);return P(f,j(W,{get when(){return e.fs.getType(r)==="dir"},get fallback(){return j(ot,{get fs(){return e.fs},get path(){return`${e.path==="/"?"":e.path}/${r}`}})},get children(){return j(oe,{get fs(){return e.fs},path:r})}})),f})()})),t}})]},ct=()=>{const e=Ue({src:{"index.ts":`console.log(0);
`}},localStorage),i=we(e),[n,l]=A(!1),[s]=X(n,async()=>we(We({mode:"readwrite"})));return(()=>{const o=rt.cloneNode(!0),t=o.firstChild,r=t.firstChild;return P(r,j(De,{fallback:(f,u)=>(()=>{const c=st.cloneNode(!0),a=c.firstChild,d=a.nextSibling,g=d.nextSibling,y=g.nextSibling;return P(c,f,d),Be(y,"click",u,!0),c})(),get children(){return[et.cloneNode(!0),tt.cloneNode(!0),j(oe,{fs:i,path:"/"}),j(W,{get when(){return B(()=>!s.loading&&!s.error)()&&s()},get fallback(){return(()=>{const f=lt.cloneNode(!0);return f.$$click=()=>l(!0),U(()=>f.disabled=s.loading),f})()},get children(){return[nt.cloneNode(!0),it.cloneNode(!0),j(oe,{get fs(){return s()},path:"/"})]}})]}})),o})()};He(()=>j(ct,{}),document.getElementById("root"));qe(["click","input"]);
