(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const t of s.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&o(t)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}})();const b={},Ae=(e,i)=>e===i,_e=Symbol("solid-track"),Q={equals:Ae};let L=null,xe=ve;const O=1,Y=2,me={owned:null,cleanups:null,context:null,owner:null},le={};var w=null;let q=null,$=null,S=null,P=null,ee=0;function G(e,i){const n=$,o=w,l=e.length===0,s=l?me:{owned:null,cleanups:null,context:null,owner:i===void 0?o:i},t=l?e:()=>e(()=>D(()=>te(s)));w=s,$=null;try{return H(t,!0)}finally{$=n,w=o}}function A(e,i){i=i?Object.assign({},Q,i):Q;const n={value:e,observers:null,observerSlots:null,comparator:i.equals||void 0},o=l=>(typeof l=="function"&&(l=l(n.value)),Ee(n,l));return[be.bind(n),o]}function fe(e,i,n){const o=ce(e,i,!0,O);J(o)}function U(e,i,n){const o=ce(e,i,!1,O);J(o)}function B(e,i,n){n=n?Object.assign({},Q,n):Q;const o=ce(e,i,!0,0);return o.observers=null,o.observerSlots=null,o.comparator=n.equals||void 0,J(o),be.bind(o)}function X(e,i,n){let o,l,s;arguments.length===2&&typeof i=="object"||arguments.length===1?(o=!0,l=e,s=i||{}):(o=e,l=i,s=n||{});let t=null,r=le,f=null,u=!1,c="initialValue"in s,a=typeof o=="function"&&B(o);const d=new Set,[g,y]=(s.storage||A)(s.initialValue),[h,_]=A(void 0),[x,E]=A(void 0,{equals:!1}),[k,N]=A(c?"ready":"unresolved");if(b.context){f=`${b.context.id}${b.context.count++}`;let m;s.ssrLoadFrom==="initial"?r=s.initialValue:b.load&&(m=b.load(f))&&(r=m[0])}function C(m,p,v,V){return t===m&&(t=null,c=!0,(m===r||p===r)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(V,{value:p})),r=le,ne(p,v)),p}function ne(m,p){H(()=>{p===void 0&&y(()=>m),N(p!==void 0?"errored":"ready"),_(p);for(const v of d.keys())v.decrement();d.clear()},!1)}function ie(){const m=je,p=g(),v=h();if(v!==void 0&&!t)throw v;return $&&!$.user&&m&&fe(()=>{x(),t&&(m.resolved||d.has(m)||(m.increment(),d.add(m)))}),p}function re(m=!0){if(m!==!1&&u)return;u=!1;const p=a?a():o;if(p==null||p===!1){C(t,D(g));return}const v=r!==le?r:D(()=>l(p,{value:g(),refetching:m}));return typeof v!="object"||!(v&&"then"in v)?(C(t,v,void 0,p),v):(t=v,u=!0,queueMicrotask(()=>u=!1),H(()=>{N(c?"refreshing":"pending"),E()},!1),v.then(V=>C(v,V,void 0,p),V=>C(v,void 0,Te(V),p)))}return Object.defineProperties(ie,{state:{get:()=>k()},error:{get:()=>h()},loading:{get(){const m=k();return m==="pending"||m==="refreshing"}},latest:{get(){if(!c)return ie();const m=h();if(m&&!t)throw m;return g()}}}),a?fe(()=>re(!1)):re(!1),[ie,{refetch:re,mutate:y}]}function Ne(e){return H(e,!1)}function D(e){if($===null)return e();const i=$;$=null;try{return e()}finally{$=i}}function $e(e){return w===null||(w.cleanups===null?w.cleanups=[e]:w.cleanups.push(e)),e}function ue(e){L||(L=Symbol("error")),w===null||(w.context===null?w.context={[L]:[e]}:w.context[L]?w.context[L].push(e):w.context[L]=[e])}let je;function be(){const e=q;if(this.sources&&(this.state||e))if(this.state===O||e)J(this);else{const i=S;S=null,H(()=>Z(this),!1),S=i}if($){const i=this.observers?this.observers.length:0;$.sources?($.sources.push(this),$.sourceSlots.push(i)):($.sources=[this],$.sourceSlots=[i]),this.observers?(this.observers.push($),this.observerSlots.push($.sources.length-1)):(this.observers=[$],this.observerSlots=[$.sources.length-1])}return this.value}function Ee(e,i,n){let o=e.value;return(!e.comparator||!e.comparator(o,i))&&(e.value=i,e.observers&&e.observers.length&&H(()=>{for(let l=0;l<e.observers.length;l+=1){const s=e.observers[l],t=q&&q.running;t&&q.disposed.has(s),(t&&!s.tState||!t&&!s.state)&&(s.pure?S.push(s):P.push(s),s.observers&&Se(s)),t||(s.state=O)}if(S.length>1e6)throw S=[],new Error},!1)),i}function J(e){if(!e.fn)return;te(e);const i=w,n=$,o=ee;$=w=e,Ce(e,e.value,o),$=n,w=i}function Ce(e,i,n){let o;try{o=e.fn(i)}catch(l){return e.pure&&(e.state=O,e.owned&&e.owned.forEach(te),e.owned=null),e.updatedAt=n+1,ke(l)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Ee(e,o):e.value=o,e.updatedAt=n)}function ce(e,i,n,o=O,l){const s={fn:e,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:i,owner:w,context:null,pure:n};return w===null||w!==me&&(w.owned?w.owned.push(s):w.owned=[s]),s}function pe(e){const i=q;if(e.state===0||i)return;if(e.state===Y||i)return Z(e);if(e.suspense&&D(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ee);)(e.state||i)&&n.push(e);for(let o=n.length-1;o>=0;o--)if(e=n[o],e.state===O||i)J(e);else if(e.state===Y||i){const l=S;S=null,H(()=>Z(e,n[0]),!1),S=l}}function H(e,i){if(S)return e();let n=!1;i||(S=[]),P?n=!0:P=[],ee++;try{const o=e();return Me(n),o}catch(o){n||(P=null),S=null,ke(o)}}function Me(e){if(S&&(ve(S),S=null),e)return;const i=P;P=null,i.length&&H(()=>xe(i),!1)}function ve(e){for(let i=0;i<e.length;i++)pe(e[i])}function Z(e,i){const n=q;e.state=0;for(let o=0;o<e.sources.length;o+=1){const l=e.sources[o];l.sources&&(l.state===O||n?l!==i&&(!l.updatedAt||l.updatedAt<ee)&&pe(l):(l.state===Y||n)&&Z(l,i))}}function Se(e){const i=q;for(let n=0;n<e.observers.length;n+=1){const o=e.observers[n];(!o.state||i)&&(o.state=Y,o.pure?S.push(o):P.push(o),o.observers&&Se(o))}}function te(e){let i;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),o=e.sourceSlots.pop(),l=n.observers;if(l&&l.length){const s=l.pop(),t=n.observerSlots.pop();o<l.length&&(s.sourceSlots[t]=o,l[o]=s,n.observerSlots[o]=t)}}if(e.owned){for(i=0;i<e.owned.length;i++)te(e.owned[i]);e.owned=null}if(e.cleanups){for(i=0;i<e.cleanups.length;i++)e.cleanups[i]();e.cleanups=null}e.state=0,e.context=null}function Te(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function de(e,i){for(const n of e)n(i)}function ke(e){e=Te(e);const i=L&&Fe(w,L);if(!i)throw e;P?P.push({fn(){de(i,e)},state:O}):de(i,e)}function Fe(e,i){return e?e.context&&e.context[i]!==void 0?e.context[i]:Fe(e.owner,i):void 0}const Pe=Symbol("fallback");function ae(e){for(let i=0;i<e.length;i++)e[i]()}function Oe(e,i,n={}){let o=[],l=[],s=[],t=0,r=i.length>1?[]:null;return $e(()=>ae(s)),()=>{let f=e()||[],u,c;return f[_e],D(()=>{let d=f.length,g,y,h,_,x,E,k,N,C;if(d===0)t!==0&&(ae(s),s=[],o=[],l=[],t=0,r&&(r=[])),n.fallback&&(o=[Pe],l[0]=G(ne=>(s[0]=ne,n.fallback())),t=1);else if(t===0){for(l=new Array(d),c=0;c<d;c++)o[c]=f[c],l[c]=G(a);t=d}else{for(h=new Array(d),_=new Array(d),r&&(x=new Array(d)),E=0,k=Math.min(t,d);E<k&&o[E]===f[E];E++);for(k=t-1,N=d-1;k>=E&&N>=E&&o[k]===f[N];k--,N--)h[N]=l[k],_[N]=s[k],r&&(x[N]=r[k]);for(g=new Map,y=new Array(N+1),c=N;c>=E;c--)C=f[c],u=g.get(C),y[c]=u===void 0?-1:u,g.set(C,c);for(u=E;u<=k;u++)C=o[u],c=g.get(C),c!==void 0&&c!==-1?(h[c]=l[u],_[c]=s[u],r&&(x[c]=r[u]),c=y[c],g.set(C,c)):s[u]();for(c=E;c<d;c++)c in h?(l[c]=h[c],s[c]=_[c],r&&(r[c]=x[c],r[c](c))):l[c]=G(a);l=l.slice(0,t=d),o=f.slice(0)}return l});function a(d){if(s[c]=d,r){const[g,y]=A(c);return r[c]=y,i(f[c],g)}return i(f[c])}}}function j(e,i){return D(()=>e(i||{}))}function Le(e){const i="fallback"in e&&{fallback:()=>e.fallback};return B(Oe(()=>e.each,e.children,i||void 0))}function W(e){let i=!1;const n=e.keyed,o=B(()=>e.when,void 0,{equals:(l,s)=>i?l===s:!l==!s});return B(()=>{const l=o();if(l){const s=e.children,t=typeof s=="function"&&s.length>0;return i=n||t,t?D(()=>s(l)):s}return e.fallback},void 0,void 0)}let K;function De(e){let i,n;b.context&&b.load&&(n=b.load(b.context.id+b.context.count))&&(i=n[0]);const[o,l]=A(i,void 0);return K||(K=new Set),K.add(l),$e(()=>K.delete(l)),B(()=>{let s;if(s=o()){const t=e.fallback,r=typeof t=="function"&&t.length?D(()=>t(s,()=>l())):t;return ue(l),r}return ue(l),e.children},void 0,void 0)}function He(e,i,n){let o=n.length,l=i.length,s=o,t=0,r=0,f=i[l-1].nextSibling,u=null;for(;t<l||r<s;){if(i[t]===n[r]){t++,r++;continue}for(;i[l-1]===n[s-1];)l--,s--;if(l===t){const c=s<o?r?n[r-1].nextSibling:n[s-r]:f;for(;r<s;)e.insertBefore(n[r++],c)}else if(s===r)for(;t<l;)(!u||!u.has(i[t]))&&i[t].remove(),t++;else if(i[t]===n[s-1]&&n[r]===i[l-1]){const c=i[--l].nextSibling;e.insertBefore(n[r++],i[t++].nextSibling),e.insertBefore(n[--s],c),i[l]=n[s]}else{if(!u){u=new Map;let a=r;for(;a<s;)u.set(n[a],a++)}const c=u.get(i[t]);if(c!=null)if(r<c&&c<s){let a=t,d=1,g;for(;++a<l&&a<s&&!((g=u.get(i[a]))==null||g!==c+d);)d++;if(d>c-r){const y=i[t];for(;r<c;)e.insertBefore(n[r++],y)}else e.replaceChild(n[r++],i[t++])}else t++;else i[t++].remove()}}}const ge="_$DX_DELEGATE";function Ie(e,i,n,o={}){let l;return G(s=>{l=s,i===document?e():M(i,e(),i.firstChild?null:void 0,n)},o.owner),()=>{l(),i.textContent=""}}function T(e,i,n){const o=document.createElement("template");if(o.innerHTML=e,i&&o.innerHTML.split("<").length-1!==i)throw`The browser resolved template HTML does not match JSX input:
${o.innerHTML}

${e}. Is your HTML properly formed?`;let l=o.content.firstChild;return n&&(l=l.firstChild),l}function qe(e,i=window.document){const n=i[ge]||(i[ge]=new Set);for(let o=0,l=e.length;o<l;o++){const s=e[o];n.has(s)||(n.add(s),i.addEventListener(s,Re))}}function Be(e,i,n,o){if(o)Array.isArray(n)?(e[`$$${i}`]=n[0],e[`$$${i}Data`]=n[1]):e[`$$${i}`]=n;else if(Array.isArray(n)){const l=n[0];e.addEventListener(i,n[0]=s=>l.call(e,n[1],s))}else e.addEventListener(i,n)}function M(e,i,n,o){if(n!==void 0&&!o&&(o=[]),typeof i!="function")return z(e,i,o,n);U(l=>z(e,i(),l,n),o)}function Re(e){const i=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}}),b.registry&&!b.done&&(b.done=_$HY.done=!0);n;){const o=n[i];if(o&&!n.disabled){const l=n[`${i}Data`];if(l!==void 0?o.call(n,l,e):o.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function z(e,i,n,o,l){for(b.context&&!n&&(n=[...e.childNodes]);typeof n=="function";)n=n();if(i===n)return n;const s=typeof i,t=o!==void 0;if(e=t&&n[0]&&n[0].parentNode||e,s==="string"||s==="number"){if(b.context)return n;if(s==="number"&&(i=i.toString()),t){let r=n[0];r&&r.nodeType===3?r.data=i:r=document.createTextNode(i),n=R(e,n,o,r)}else n!==""&&typeof n=="string"?n=e.firstChild.data=i:n=e.textContent=i}else if(i==null||s==="boolean"){if(b.context)return n;n=R(e,n,o)}else{if(s==="function")return U(()=>{let r=i();for(;typeof r=="function";)r=r();n=z(e,r,n,o)}),()=>n;if(Array.isArray(i)){const r=[],f=n&&Array.isArray(n);if(se(r,i,n,l))return U(()=>n=z(e,r,n,o,!0)),()=>n;if(b.context){if(!r.length)return n;for(let u=0;u<r.length;u++)if(r[u].parentNode)return n=r}if(r.length===0){if(n=R(e,n,o),t)return n}else f?n.length===0?ye(e,r,o):He(e,n,r):(n&&R(e),ye(e,r));n=r}else if(i instanceof Node){if(b.context&&i.parentNode)return n=t?[i]:i;if(Array.isArray(n)){if(t)return n=R(e,n,o,i);R(e,n,null,i)}else n==null||n===""||!e.firstChild?e.appendChild(i):e.replaceChild(i,e.firstChild);n=i}else console.warn("Unrecognized value. Skipped inserting",i)}return n}function se(e,i,n,o){let l=!1;for(let s=0,t=i.length;s<t;s++){let r=i[s],f=n&&n[s];if(r instanceof Node)e.push(r);else if(!(r==null||r===!0||r===!1))if(Array.isArray(r))l=se(e,r,f)||l;else if(typeof r=="function")if(o){for(;typeof r=="function";)r=r();l=se(e,Array.isArray(r)?r:[r],Array.isArray(f)?f:[f])||l}else e.push(r),l=!0;else{const u=String(r);u==="<!>"?f&&f.nodeType===8&&e.push(f):f&&f.nodeType===3&&f.data===u?e.push(f):e.push(document.createTextNode(u))}}return l}function ye(e,i,n=null){for(let o=0,l=i.length;o<l;o++)e.insertBefore(i[o],n)}function R(e,i,n,o){if(n===void 0)return e.textContent="";const l=o||document.createTextNode("");if(i.length){let s=!1;for(let t=i.length-1;t>=0;t--){const r=i[t];if(l!==r){const f=r.parentNode===e;!s&&!t?f?e.replaceChild(l,r):e.insertBefore(l,n):f&&r.remove()}else s=!0}}else e.insertBefore(l,n);return[l]}const F=e=>e.split("/").slice(0,-1).join("/")||"/",I=e=>e.split("/").at(-1),Ve=typeof globalThis.showDirectoryPicker=="function"?async e=>{const i=await globalThis.showDirectoryPicker(e),n=async(l,s)=>{const t=l.split("/").filter(f=>f);let r=i;for(let f=0;f<t.length;f++){const u=t[f];if(r=await s(r,u,f,t)||void 0,!r)return}return r},o=(l,s)=>l.kind==="directory"?l.getDirectoryHandle(s).catch(()=>l.getFileHandle(s)).catch(()=>{}):void 0;return{async:!0,getType:async l=>n(l,o).then(s=>s?.kind==="directory"?"dir":s?.kind||null).catch(()=>null),readdir:async l=>n(l,o).then(async s=>{if(s?.kind!=="directory")return[];const t=[];for await(const r of s.keys())t.push(r);return t}),mkdir:async l=>{await n(l,(s,t,r,f)=>s.kind==="file"?Promise.reject(new Error(`attempt to create directory "${l}" failed - "${f.slice(0,r).join("/")} is a file`)):s.getDirectoryHandle(t,{create:!0}))},readFile:async l=>await n(l,(s,t,r,f)=>r<f.length-1?o(s,t):s.kind==="directory"?s.getFileHandle(t):void 0).then(s=>s?.kind==="file"?s.getFile().then(t=>t.text()):Promise.reject(`reading file "${l}" failed - not a file`)),writeFile:async(l,s)=>void await n(l,(t,r,f,u)=>f<u.length-1?o(t,r):t.kind==="directory"?t.getFileHandle(r,{create:!0}).then(c=>c.createWritable().then(a=>a.write(s).then(()=>a.close())).then(()=>c)):Promise.reject(new Error(`could not write file ${l}, since path is no parent directory`))),rm:async l=>void await n(l,(s,t,r,f)=>r<f.length-1?o(s,t):s.kind==="directory"?s.removeEntry(t,{recursive:!0}):Promise.reject(new Error(`${l} not found; could not be removed`)))}}:()=>Promise.resolve(null),We=(e,i,n="solid-primitive-filesystem")=>{let o;const l=i?.getItem(n);try{o=JSON.parse(typeof l=="string"?l:"null")}catch{}let s=o||e||{};l instanceof Promise&&l.then(c=>{s=Object.assign(c||{},s)});const t=()=>i?.setItem(n,JSON.stringify(s));t();const r=(c,a)=>{let d=s;return c=c.startsWith("/")?c.slice(1):c,c.split("/").forEach((g,y,h)=>{d=g?a(d,g,y,h):d}),d};function f(c=(a,d)=>[a,d]){const a=[],d=(g=s||{},y="/")=>{typeof g=="object"&&Object.keys(g).forEach(h=>typeof g[h]=="string"?a.push(c(`${y}${h}`,g[h])):d(g[h],`${y}${h}/`))};return d(),a}const u={async:!1,getType:c=>{if(c===""||c==="/")return"dir";const a=r(c,(d,g)=>typeof d=="object"?d[g]:void 0);return a===void 0?null:typeof a=="string"?"file":"dir"},mkdir:c=>(r(c,(a,d,g,y)=>{if(typeof a!="object")throw new Error(`"${y.slice(0,g).join("/")}" is not a directory`);if(a[d]===void 0)a[d]={};else if(typeof a[d]=="string")throw new Error(`Cannot overwrite file ${y.slice(0,g+1).join("/")} with path`);return a[d]}),t()),readdir:c=>{const a=r(c.replace(/^\/$/,""),(d,g,y,h)=>{if(typeof d!="object")throw new Error(`"${h.slice(0,y).join("/")}" is not a directory`);return y===0&&g===""?d:d=d[g]});if(typeof a!="object")throw new Error(`"${c}" is not a directory`);return Object.keys(a)},rename:(c,a)=>{let d;const g=r(c,(y,h,_,x)=>{if(typeof y!="object")throw new Error(`"${x.slice(0,_).join("/")}" is not a directory`);if(_+1>=x.length){if(y[h]===void 0)throw new Error(`${c} does not exist and therefore cannot be renamed`);d=h}return y[h]});r(a,(y,h,_,x)=>{if(typeof y!="object")throw new Error(`"${x.slice(0,_).join("/")}" is not a directory`);return _+1>=x.length&&Object.keys(y).forEach(E=>{E===d?(y[h]=g,delete y[E]):y[E]=y[E]}),y[h]})},rm:c=>void r(c,(a,d,g,y)=>{if(typeof a!="object")throw new Error(`"${y.slice(0,g).join("/")}" is not a directory`);return g+1===y.length?(delete a[d],t()):a=a[d],a}),readFile:c=>r(c,(a,d,g,y)=>{if(typeof a!="object")throw new Error(`"${y.slice(0,g).join("/")}" is not a directory`);if(a=a[d],g+1===y.length&&typeof a!="string")throw new Error(`"${c}" is not a file`);return a}),writeFile:(c,a)=>void r(c,(d,g,y,h)=>{if(typeof d!="object")throw new Error(`"${h.slice(0,y).join("/")}" is not a directory`);if(y+1===h.length){if(typeof d[g]=="object")throw new Error(`"${c}" is a directory and cannot be overwritten with a file`);d[g]=a,t()}else return d=d[g]}),toMap:()=>{const c={clear:()=>u.rm("/"),delete:a=>u.getType(a)==="file"&&u.rm(a),entries:()=>f()[Symbol.iterator](),forEach:a=>{f().forEach(([d,g])=>a(g,d,c))},get:a=>{try{return u.readFile(a)}catch{}},has:a=>u.getType(a)==="file",keys:()=>f(a=>a)[Symbol.iterator](),set:(a,d)=>{const g=F(a);return u.getType(g)!=="dir"&&u.mkdir(g),u.writeFile(a,d),c},get size(){return f().length},values:()=>f((a,d)=>d)[Symbol.iterator](),[Symbol.iterator]:()=>c.entries(),[Symbol.toStringTag]:"Map"};return c}};return u},Ue=(e,i)=>{const n=new Map,o=new Map,l=new Map,s={getType:(t,r)=>{n.has(t)||n.set(t,A());const[f,u]=n.get(t);return(r||f()===void 0)&&u(e.getType(t)),f()},readdir:(t,r)=>{o.has(t)||o.set(t,A());const[f,u]=o.get(t);return(r||f()===void 0)&&u(e.readdir(t)),f()},mkdir:t=>{e.mkdir(t),o.get(F(t))?.[1]((r=[])=>[...r,t])},readFile:(t,r)=>{l.has(t)||l.set(t,A());const[f,u]=l.get(t);return(r||f()===void 0)&&u(e.readFile(t)),f()},writeFile:(t,r)=>{const f=e.getType(t)===null;e.writeFile(t,r),l.get(t)?.[1](r),f&&(s.getType(t,!0),o.get(F(t))?.[1]((u=[])=>[...u,I(t)]))},rename:(t,r)=>{const f=e.getType(t),u=e.getType(r);if(f==="dir"&&u==="file")throw new Error(`Cannot overwrite file "${r}" with directory "${t}"`);if(f==="file"&&u==="dir")throw new Error(`cannot overwrite directory "${r}" with file "${t}"`);typeof e.rename=="function"?e.rename(t,r):f==="dir"?(u===null&&e.mkdir(r),e.readdir(t).forEach(c=>s.rename(`${t}/${c}`,`${r}/${c}`))):e.writeFile(r,e.readFile(t)),n.get(t)?.[1](void 0),n.delete(t),o.get(F(t))?.[1]((c=[])=>c.filter(a=>a===I(t))),o.get(F(r))?.[1]((c=[])=>[...c,I(r)])},rm:t=>{e.rm(t),n.get(t)?.[1](void 0),n.delete(t),[...o.keys()].forEach(r=>{r.startsWith(`${t}/`)&&(n.get(r)?.[1](void 0),n.delete(r))}),o.get(F(t))?.[1]((r=[])=>r.filter(f=>f===I(t)))}};return i&&i((t,r)=>{(t==="mkdir"||t==="rm")&&o.get(F(r))?.[1]((f=[])=>f.includes(r)?f:[...f,r]),t==="rm"&&n.get(r)?.[1](null),t==="writeFile"&&l.has(r)&&s.readFile(r,!0)}),s},he=(e,i)=>{const n=new Map,o=new Map,l=new Map,s={getType:(t,r)=>{n.has(t)||n.set(t,X(()=>e.getType(t)));const[f,{refetch:u}]=n.get(t);return r&&u(),f()},readdir:(t,r)=>{o.has(t)||o.set(t,X(()=>e.readdir(t)));const[f,{refetch:u}]=o.get(t);return r&&u(),f()},mkdir:t=>e.mkdir(t).then(()=>{t.split("/").forEach((r,f,u)=>{const c=u.slice(0,f+1).join("/");n.has(c)?n.get(c)[1].refetch():s.getType(c)}),o.get(F(t))?.[1].refetch()}),readFile:(t,r)=>{l.has(t)||l.set(t,X(()=>e.readFile(t)));const[f,{refetch:u}]=l.get(t);return r&&u(),f()},writeFile:(t,r)=>e.writeFile(t,r).then(()=>{l.get(t)?.[1].mutate(r);const f=I(t);o.get(F(t))?.[1].mutate((u=[])=>u.includes(f)?u:[...u,f])}),rename:async(t,r)=>{const f=await e.getType(t),u=await e.getType(r);if(f==="dir"&&u==="file")throw new Error(`Cannot overwrite file "${r}" with directory "${t}"`);if(f==="file"&&u==="dir")throw new Error(`cannot overwrite directory "${r}" with file "${t}"`);typeof e.rename=="function"?await e.rename(t,r):(f==="dir"?(u===null&&await e.mkdir(r),(await e.readdir(t)).forEach(c=>s.rename(`${t}/${c}`,`${r}/${c}`))):await e.writeFile(r,await e.readFile(t)),await e.rm(t)),Ne(()=>{n.get(t)?.[1].mutate(void 0),n.delete(t);const c=F(t);o.get(c)?.[1].refetch();const a=F(r);c!==a&&o.get(a)?.[1].refetch()})},rm:t=>e.rm(t).then(()=>{n.get(t)?.[1].mutate(void 0),n.delete(t),[...o.keys()].forEach(r=>{r.startsWith(`${t}/`)&&(n.get(r)?.[1].mutate(void 0),n.delete(r))}),o.get(F(t))?.[1].refetch()})};return i&&i((t,r)=>{(t==="mkdir"||t==="rm")&&o.get(F(r))?.[1].mutate((f=[])=>f.includes(r)?f:[...f,r]),t==="rm"&&n.get(r)?.[1].mutate(null),t==="writeFile"&&l.get(r)?.[1].refetch()}),s};function we(e,i){if(e===null)throw new Error("file system adapter is null");return e instanceof Promise?e.then(n=>he(n,i)):e.async?he(e,i):Ue(e,i)}const Je=T("<textarea></textarea>",2),Ke=T("<div><p><button></button></p></div>",6),Ge=T("<button>New File</button>",2),Xe=T("<button>New Dir</button>",2),Qe=T("<div><button></button> <!> <input></div>",6),Ye=T("<ul></ul>",2),Ze=T("<li></li>",2),ze=T("<h4>FileSystem primitive</h4>",2),et=T("<p>Object virtual file system (localStorage persistence)</p>",2),tt=T("<p>Web Filesystem Access file system</p>",2),nt=T("<p><em>Warning!</em> This can overwrite or delete actual files!</p>",4),it=T('<div class="box-border flex min-h-screen w-full flex-col items-center justify-center space-y-4 bg-gray-800 p-24 text-white"><div class="wrapper-v"><div></div></div></div>',6),rt=T("<div>Error: <!> <button>reset</button></div>",5),lt=T("<button>Request directory access</button>",2),st=e=>{const[i,n]=A(!1),o=B(s=>s||i()?e.fs.readFile(e.path):void 0),l=s=>e.fs.writeFile(e.path,s);return(()=>{const s=Ke.cloneNode(!0),t=s.firstChild,r=t.firstChild;return r.$$click=()=>n(!i()),M(r,()=>i()?"-":"+"),M(t,()=>I(e.path),null),M(s,j(W,{get when(){return i()},get children(){const f=Je.cloneNode(!0);return f.$$input=u=>l(u.currentTarget.value),U(()=>f.value=o()),f}}),null),s})()},oe=e=>{const[i,n]=A(e.path==="/"),[o,l]=A(""),s=()=>i()&&e.fs.readdir(e.path);return[(()=>{const t=Qe.cloneNode(!0),r=t.firstChild,f=r.nextSibling,u=f.nextSibling,c=u.nextSibling,a=c.nextSibling;return r.$$click=()=>n(!i()),M(r,()=>i()?"-":"+"),M(t,()=>I(e.path)||"/",u),a.$$input=d=>l(d.currentTarget.value),M(t,j(W,{get when(){return o()!==""},get children(){return[(()=>{const d=Ge.cloneNode(!0);return d.$$click=()=>e.fs.writeFile(`${e.path==="/"?"":e.path}/${o()}`,""),d})(),(()=>{const d=Xe.cloneNode(!0);return d.$$click=()=>e.fs.mkdir(`${e.path==="/"?"":e.path}/${o()}`),d})()]}}),null),t})(),j(W,{get when(){return s()!==void 0},get children(){const t=Ye.cloneNode(!0);return M(t,j(Le,{get each(){return s()},children:r=>(()=>{const f=Ze.cloneNode(!0);return M(f,j(W,{get when(){return e.fs.getType(r)==="dir"},get fallback(){return j(st,{get fs(){return e.fs},get path(){return`${e.path==="/"?"":e.path}/${r}`}})},get children(){return j(oe,{get fs(){return e.fs},path:r})}})),f})()})),t}})]},ot=()=>{const e=We({src:{"index.ts":`console.log(0);
`}},localStorage),i=we(e),[n,o]=A(!1),[l]=X(n,async()=>we(Ve({mode:"readwrite"})));return(()=>{const s=it.cloneNode(!0),t=s.firstChild,r=t.firstChild;return M(r,j(De,{fallback:(f,u)=>(()=>{const c=rt.cloneNode(!0),a=c.firstChild,d=a.nextSibling,g=d.nextSibling,y=g.nextSibling;return M(c,f,d),Be(y,"click",u,!0),c})(),get children(){return[ze.cloneNode(!0),et.cloneNode(!0),j(oe,{fs:i,path:"/"}),j(W,{get when(){return B(()=>!l.loading&&!l.error)()&&l()},get fallback(){return(()=>{const f=lt.cloneNode(!0);return f.$$click=()=>o(!0),U(()=>f.disabled=l.loading),f})()},get children(){return[tt.cloneNode(!0),nt.cloneNode(!0),j(oe,{get fs(){return l()},path:"/"})]}})]}})),s})()};Ie(()=>j(ot,{}),document.getElementById("root"));qe(["click","input"]);
