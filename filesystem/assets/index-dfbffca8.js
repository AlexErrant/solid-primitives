(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const t of l.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&o(t)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();const b={},Ae=(e,i)=>e===i,_e=Symbol("solid-track"),Q={equals:Ae};let L=null,xe=pe;const O=1,Y=2,me={owned:null,cleanups:null,context:null,owner:null},se={};var w=null;let q=null,$=null,S=null,M=null,ee=0;function G(e,i){const n=$,o=w,s=e.length===0,l=s?me:{owned:null,cleanups:null,context:null,owner:i===void 0?o:i},t=s?e:()=>e(()=>D(()=>te(l)));w=l,$=null;try{return H(t,!0)}finally{$=n,w=o}}function A(e,i){i=i?Object.assign({},Q,i):Q;const n={value:e,observers:null,observerSlots:null,comparator:i.equals||void 0},o=s=>(typeof s=="function"&&(s=s(n.value)),ve(n,s));return[be.bind(n),o]}function fe(e,i,n){const o=ce(e,i,!0,O);J(o)}function U(e,i,n){const o=ce(e,i,!1,O);J(o)}function B(e,i,n){n=n?Object.assign({},Q,n):Q;const o=ce(e,i,!0,0);return o.observers=null,o.observerSlots=null,o.comparator=n.equals||void 0,J(o),be.bind(o)}function X(e,i,n){let o,s,l;arguments.length===2&&typeof i=="object"||arguments.length===1?(o=!0,s=e,l=i||{}):(o=e,s=i,l=n||{});let t=null,r=se,f=null,u=!1,c="initialValue"in l,a=typeof o=="function"&&B(o);const d=new Set,[g,y]=(l.storage||A)(l.initialValue),[h,_]=A(void 0),[x,v]=A(void 0,{equals:!1}),[k,N]=A(c?"ready":"unresolved");if(b.context){f=`${b.context.id}${b.context.count++}`;let m;l.ssrLoadFrom==="initial"?r=l.initialValue:b.load&&(m=b.load(f))&&(r=m[0])}function C(m,E,p,V){return t===m&&(t=null,c=!0,(m===r||E===r)&&l.onHydrated&&queueMicrotask(()=>l.onHydrated(V,{value:E})),r=se,ne(E,p)),E}function ne(m,E){H(()=>{E===void 0&&y(()=>m),N(E!==void 0?"errored":"ready"),_(E);for(const p of d.keys())p.decrement();d.clear()},!1)}function ie(){const m=je,E=g(),p=h();if(p!==void 0&&!t)throw p;return $&&!$.user&&m&&fe(()=>{x(),t&&(m.resolved||d.has(m)||(m.increment(),d.add(m)))}),E}function re(m=!0){if(m!==!1&&u)return;u=!1;const E=a?a():o;if(E==null||E===!1){C(t,D(g));return}const p=r!==se?r:D(()=>s(E,{value:g(),refetching:m}));return typeof p!="object"||!(p&&"then"in p)?(C(t,p,void 0,E),p):(t=p,u=!0,queueMicrotask(()=>u=!1),H(()=>{N(c?"refreshing":"pending"),v()},!1),p.then(V=>C(p,V,void 0,E),V=>C(p,void 0,Te(V),E)))}return Object.defineProperties(ie,{state:{get:()=>k()},error:{get:()=>h()},loading:{get(){const m=k();return m==="pending"||m==="refreshing"}},latest:{get(){if(!c)return ie();const m=h();if(m&&!t)throw m;return g()}}}),a?fe(()=>re(!1)):re(!1),[ie,{refetch:re,mutate:y}]}function Ne(e){return H(e,!1)}function D(e){if($===null)return e();const i=$;$=null;try{return e()}finally{$=i}}function $e(e){return w===null||(w.cleanups===null?w.cleanups=[e]:w.cleanups.push(e)),e}function ue(e){L||(L=Symbol("error")),w===null||(w.context===null?w.context={[L]:[e]}:w.context[L]?w.context[L].push(e):w.context[L]=[e])}let je;function be(){const e=q;if(this.sources&&(this.state||e))if(this.state===O||e)J(this);else{const i=S;S=null,H(()=>Z(this),!1),S=i}if($){const i=this.observers?this.observers.length:0;$.sources?($.sources.push(this),$.sourceSlots.push(i)):($.sources=[this],$.sourceSlots=[i]),this.observers?(this.observers.push($),this.observerSlots.push($.sources.length-1)):(this.observers=[$],this.observerSlots=[$.sources.length-1])}return this.value}function ve(e,i,n){let o=e.value;return(!e.comparator||!e.comparator(o,i))&&(e.value=i,e.observers&&e.observers.length&&H(()=>{for(let s=0;s<e.observers.length;s+=1){const l=e.observers[s],t=q&&q.running;t&&q.disposed.has(l),(t&&!l.tState||!t&&!l.state)&&(l.pure?S.push(l):M.push(l),l.observers&&Se(l)),t||(l.state=O)}if(S.length>1e6)throw S=[],new Error},!1)),i}function J(e){if(!e.fn)return;te(e);const i=w,n=$,o=ee;$=w=e,Ce(e,e.value,o),$=n,w=i}function Ce(e,i,n){let o;try{o=e.fn(i)}catch(s){return e.pure&&(e.state=O,e.owned&&e.owned.forEach(te),e.owned=null),e.updatedAt=n+1,ke(s)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?ve(e,o):e.value=o,e.updatedAt=n)}function ce(e,i,n,o=O,s){const l={fn:e,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:i,owner:w,context:null,pure:n};return w===null||w!==me&&(w.owned?w.owned.push(l):w.owned=[l]),l}function Ee(e){const i=q;if(e.state===0||i)return;if(e.state===Y||i)return Z(e);if(e.suspense&&D(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ee);)(e.state||i)&&n.push(e);for(let o=n.length-1;o>=0;o--)if(e=n[o],e.state===O||i)J(e);else if(e.state===Y||i){const s=S;S=null,H(()=>Z(e,n[0]),!1),S=s}}function H(e,i){if(S)return e();let n=!1;i||(S=[]),M?n=!0:M=[],ee++;try{const o=e();return Pe(n),o}catch(o){n||(M=null),S=null,ke(o)}}function Pe(e){if(S&&(pe(S),S=null),e)return;const i=M;M=null,i.length&&H(()=>xe(i),!1)}function pe(e){for(let i=0;i<e.length;i++)Ee(e[i])}function Z(e,i){const n=q;e.state=0;for(let o=0;o<e.sources.length;o+=1){const s=e.sources[o];s.sources&&(s.state===O||n?s!==i&&(!s.updatedAt||s.updatedAt<ee)&&Ee(s):(s.state===Y||n)&&Z(s,i))}}function Se(e){const i=q;for(let n=0;n<e.observers.length;n+=1){const o=e.observers[n];(!o.state||i)&&(o.state=Y,o.pure?S.push(o):M.push(o),o.observers&&Se(o))}}function te(e){let i;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),o=e.sourceSlots.pop(),s=n.observers;if(s&&s.length){const l=s.pop(),t=n.observerSlots.pop();o<s.length&&(l.sourceSlots[t]=o,s[o]=l,n.observerSlots[o]=t)}}if(e.owned){for(i=0;i<e.owned.length;i++)te(e.owned[i]);e.owned=null}if(e.cleanups){for(i=0;i<e.cleanups.length;i++)e.cleanups[i]();e.cleanups=null}e.state=0,e.context=null}function Te(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function de(e,i){for(const n of e)n(i)}function ke(e){e=Te(e);const i=L&&Fe(w,L);if(!i)throw e;M?M.push({fn(){de(i,e)},state:O}):de(i,e)}function Fe(e,i){return e?e.context&&e.context[i]!==void 0?e.context[i]:Fe(e.owner,i):void 0}const Me=Symbol("fallback");function ae(e){for(let i=0;i<e.length;i++)e[i]()}function Oe(e,i,n={}){let o=[],s=[],l=[],t=0,r=i.length>1?[]:null;return $e(()=>ae(l)),()=>{let f=e()||[],u,c;return f[_e],D(()=>{let d=f.length,g,y,h,_,x,v,k,N,C;if(d===0)t!==0&&(ae(l),l=[],o=[],s=[],t=0,r&&(r=[])),n.fallback&&(o=[Me],s[0]=G(ne=>(l[0]=ne,n.fallback())),t=1);else if(t===0){for(s=new Array(d),c=0;c<d;c++)o[c]=f[c],s[c]=G(a);t=d}else{for(h=new Array(d),_=new Array(d),r&&(x=new Array(d)),v=0,k=Math.min(t,d);v<k&&o[v]===f[v];v++);for(k=t-1,N=d-1;k>=v&&N>=v&&o[k]===f[N];k--,N--)h[N]=s[k],_[N]=l[k],r&&(x[N]=r[k]);for(g=new Map,y=new Array(N+1),c=N;c>=v;c--)C=f[c],u=g.get(C),y[c]=u===void 0?-1:u,g.set(C,c);for(u=v;u<=k;u++)C=o[u],c=g.get(C),c!==void 0&&c!==-1?(h[c]=s[u],_[c]=l[u],r&&(x[c]=r[u]),c=y[c],g.set(C,c)):l[u]();for(c=v;c<d;c++)c in h?(s[c]=h[c],l[c]=_[c],r&&(r[c]=x[c],r[c](c))):s[c]=G(a);s=s.slice(0,t=d),o=f.slice(0)}return s});function a(d){if(l[c]=d,r){const[g,y]=A(c);return r[c]=y,i(f[c],g)}return i(f[c])}}}function j(e,i){return D(()=>e(i||{}))}function Le(e){const i="fallback"in e&&{fallback:()=>e.fallback};return B(Oe(()=>e.each,e.children,i||void 0))}function W(e){let i=!1;const n=e.keyed,o=B(()=>e.when,void 0,{equals:(s,l)=>i?s===l:!s==!l});return B(()=>{const s=o();if(s){const l=e.children,t=typeof l=="function"&&l.length>0;return i=n||t,t?D(()=>l(s)):l}return e.fallback},void 0,void 0)}let K;function De(e){let i,n;b.context&&b.load&&(n=b.load(b.context.id+b.context.count))&&(i=n[0]);const[o,s]=A(i,void 0);return K||(K=new Set),K.add(s),$e(()=>K.delete(s)),B(()=>{let l;if(l=o()){const t=e.fallback,r=typeof t=="function"&&t.length?D(()=>t(l,()=>s())):t;return ue(s),r}return ue(s),e.children},void 0,void 0)}function He(e,i,n){let o=n.length,s=i.length,l=o,t=0,r=0,f=i[s-1].nextSibling,u=null;for(;t<s||r<l;){if(i[t]===n[r]){t++,r++;continue}for(;i[s-1]===n[l-1];)s--,l--;if(s===t){const c=l<o?r?n[r-1].nextSibling:n[l-r]:f;for(;r<l;)e.insertBefore(n[r++],c)}else if(l===r)for(;t<s;)(!u||!u.has(i[t]))&&i[t].remove(),t++;else if(i[t]===n[l-1]&&n[r]===i[s-1]){const c=i[--s].nextSibling;e.insertBefore(n[r++],i[t++].nextSibling),e.insertBefore(n[--l],c),i[s]=n[l]}else{if(!u){u=new Map;let a=r;for(;a<l;)u.set(n[a],a++)}const c=u.get(i[t]);if(c!=null)if(r<c&&c<l){let a=t,d=1,g;for(;++a<s&&a<l&&!((g=u.get(i[a]))==null||g!==c+d);)d++;if(d>c-r){const y=i[t];for(;r<c;)e.insertBefore(n[r++],y)}else e.replaceChild(n[r++],i[t++])}else t++;else i[t++].remove()}}}const ge="_$DX_DELEGATE";function Ie(e,i,n,o={}){let s;return G(l=>{s=l,i===document?e():P(i,e(),i.firstChild?null:void 0,n)},o.owner),()=>{s(),i.textContent=""}}function T(e,i,n){const o=document.createElement("template");if(o.innerHTML=e,i&&o.innerHTML.split("<").length-1!==i)throw`The browser resolved template HTML does not match JSX input:
${o.innerHTML}

${e}. Is your HTML properly formed?`;let s=o.content.firstChild;return n&&(s=s.firstChild),s}function qe(e,i=window.document){const n=i[ge]||(i[ge]=new Set);for(let o=0,s=e.length;o<s;o++){const l=e[o];n.has(l)||(n.add(l),i.addEventListener(l,Re))}}function Be(e,i,n,o){if(o)Array.isArray(n)?(e[`$$${i}`]=n[0],e[`$$${i}Data`]=n[1]):e[`$$${i}`]=n;else if(Array.isArray(n)){const s=n[0];e.addEventListener(i,n[0]=l=>s.call(e,n[1],l))}else e.addEventListener(i,n)}function P(e,i,n,o){if(n!==void 0&&!o&&(o=[]),typeof i!="function")return z(e,i,o,n);U(s=>z(e,i(),s,n),o)}function Re(e){const i=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}}),b.registry&&!b.done&&(b.done=_$HY.done=!0);n;){const o=n[i];if(o&&!n.disabled){const s=n[`${i}Data`];if(s!==void 0?o.call(n,s,e):o.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function z(e,i,n,o,s){for(b.context&&!n&&(n=[...e.childNodes]);typeof n=="function";)n=n();if(i===n)return n;const l=typeof i,t=o!==void 0;if(e=t&&n[0]&&n[0].parentNode||e,l==="string"||l==="number"){if(b.context)return n;if(l==="number"&&(i=i.toString()),t){let r=n[0];r&&r.nodeType===3?r.data=i:r=document.createTextNode(i),n=R(e,n,o,r)}else n!==""&&typeof n=="string"?n=e.firstChild.data=i:n=e.textContent=i}else if(i==null||l==="boolean"){if(b.context)return n;n=R(e,n,o)}else{if(l==="function")return U(()=>{let r=i();for(;typeof r=="function";)r=r();n=z(e,r,n,o)}),()=>n;if(Array.isArray(i)){const r=[],f=n&&Array.isArray(n);if(le(r,i,n,s))return U(()=>n=z(e,r,n,o,!0)),()=>n;if(b.context){if(!r.length)return n;for(let u=0;u<r.length;u++)if(r[u].parentNode)return n=r}if(r.length===0){if(n=R(e,n,o),t)return n}else f?n.length===0?ye(e,r,o):He(e,n,r):(n&&R(e),ye(e,r));n=r}else if(i instanceof Node){if(b.context&&i.parentNode)return n=t?[i]:i;if(Array.isArray(n)){if(t)return n=R(e,n,o,i);R(e,n,null,i)}else n==null||n===""||!e.firstChild?e.appendChild(i):e.replaceChild(i,e.firstChild);n=i}else console.warn("Unrecognized value. Skipped inserting",i)}return n}function le(e,i,n,o){let s=!1;for(let l=0,t=i.length;l<t;l++){let r=i[l],f=n&&n[l];if(r instanceof Node)e.push(r);else if(!(r==null||r===!0||r===!1))if(Array.isArray(r))s=le(e,r,f)||s;else if(typeof r=="function")if(o){for(;typeof r=="function";)r=r();s=le(e,Array.isArray(r)?r:[r],Array.isArray(f)?f:[f])||s}else e.push(r),s=!0;else{const u=String(r);u==="<!>"?f&&f.nodeType===8&&e.push(f):f&&f.nodeType===3&&f.data===u?e.push(f):e.push(document.createTextNode(u))}}return s}function ye(e,i,n=null){for(let o=0,s=i.length;o<s;o++)e.insertBefore(i[o],n)}function R(e,i,n,o){if(n===void 0)return e.textContent="";const s=o||document.createTextNode("");if(i.length){let l=!1;for(let t=i.length-1;t>=0;t--){const r=i[t];if(s!==r){const f=r.parentNode===e;!l&&!t?f?e.replaceChild(s,r):e.insertBefore(s,n):f&&r.remove()}else l=!0}}else e.insertBefore(s,n);return[s]}const Ve=()=>({async:!0,getType:()=>Promise.resolve(null),mkdir:()=>Promise.resolve(),readdir:()=>Promise.resolve([]),readFile:()=>Promise.resolve(""),rename:()=>Promise.resolve(),rm:()=>Promise.resolve(),writeFile:()=>Promise.resolve()}),F=e=>e.split("/").slice(0,-1).join("/")||"/",I=e=>e.split("/").at(-1),We=typeof globalThis.showDirectoryPicker=="function"?async e=>{const i=await globalThis.showDirectoryPicker(e),n=async(s,l)=>{const t=s.split("/").filter(f=>f);let r=i;for(let f=0;f<t.length;f++){const u=t[f];if(r=await l(r,u,f,t)||void 0,!r)return}return r},o=(s,l)=>s.kind==="directory"?s.getDirectoryHandle(l).catch(()=>s.getFileHandle(l)).catch(()=>{}):void 0;return{async:!0,getType:async s=>n(s,o).then(l=>l?.kind==="directory"?"dir":l?.kind||null).catch(()=>null),readdir:async s=>n(s,o).then(async l=>{if(l?.kind!=="directory")return[];const t=[];for await(const r of l.keys())t.push(r);return t}),mkdir:async s=>{await n(s,(l,t,r,f)=>l.kind==="file"?Promise.reject(new Error(`attempt to create directory "${s}" failed - "${f.slice(0,r).join("/")} is a file`)):l.getDirectoryHandle(t,{create:!0}))},readFile:async s=>await n(s,(l,t,r,f)=>r<f.length-1?o(l,t):l.kind==="directory"?l.getFileHandle(t):void 0).then(l=>l?.kind==="file"?l.getFile().then(t=>t.text()):Promise.reject(`reading file "${s}" failed - not a file`)),writeFile:async(s,l)=>void await n(s,(t,r,f,u)=>f<u.length-1?o(t,r):t.kind==="directory"?t.getFileHandle(r,{create:!0}).then(c=>c.createWritable().then(a=>a.write(l).then(()=>a.close())).then(()=>c)):Promise.reject(new Error(`could not write file ${s}, since path is no parent directory`))),rm:async s=>void await n(s,(l,t,r,f)=>r<f.length-1?o(l,t):l.kind==="directory"?l.removeEntry(t,{recursive:!0}):Promise.reject(new Error(`${s} not found; could not be removed`)))}}:()=>Promise.resolve(Ve()),Ue=(e,i,n="solid-primitive-filesystem")=>{let o;const s=i?.getItem(n);try{o=JSON.parse(typeof s=="string"?s:"null")}catch{}let l=o||e||{};s instanceof Promise&&s.then(c=>{l=Object.assign(c||{},l)});const t=()=>i?.setItem(n,JSON.stringify(l));t();const r=(c,a)=>{let d=l;return c=c.startsWith("/")?c.slice(1):c,c.split("/").forEach((g,y,h)=>{d=g?a(d,g,y,h):d}),d};function f(c=(a,d)=>[a,d]){const a=[],d=(g=l||{},y="/")=>{typeof g=="object"&&Object.keys(g).forEach(h=>typeof g[h]=="string"?a.push(c(`${y}${h}`,g[h])):d(g[h],`${y}${h}/`))};return d(),a}const u={async:!1,getType:c=>{if(c===""||c==="/")return"dir";const a=r(c,(d,g)=>typeof d=="object"?d[g]:void 0);return a===void 0?null:typeof a=="string"?"file":"dir"},mkdir:c=>(r(c,(a,d,g,y)=>{if(typeof a!="object")throw new Error(`"${y.slice(0,g).join("/")}" is not a directory`);if(a[d]===void 0)a[d]={};else if(typeof a[d]=="string")throw new Error(`Cannot overwrite file ${y.slice(0,g+1).join("/")} with path`);return a[d]}),t()),readdir:c=>{const a=r(c.replace(/^\/$/,""),(d,g,y,h)=>{if(typeof d!="object")throw new Error(`"${h.slice(0,y).join("/")}" is not a directory`);return y===0&&g===""?d:d=d[g]});if(typeof a!="object")throw new Error(`"${c}" is not a directory`);return Object.keys(a)},rename:(c,a)=>{let d;const g=r(c,(y,h,_,x)=>{if(typeof y!="object")throw new Error(`"${x.slice(0,_).join("/")}" is not a directory`);if(_+1>=x.length){if(y[h]===void 0)throw new Error(`${c} does not exist and therefore cannot be renamed`);d=h}return y[h]});r(a,(y,h,_,x)=>{if(typeof y!="object")throw new Error(`"${x.slice(0,_).join("/")}" is not a directory`);return _+1>=x.length&&Object.keys(y).forEach(v=>{v===d?(y[h]=g,delete y[v]):y[v]=y[v]}),y[h]})},rm:c=>void r(c,(a,d,g,y)=>{if(typeof a!="object")throw new Error(`"${y.slice(0,g).join("/")}" is not a directory`);return g+1===y.length?(delete a[d],t()):a=a[d],a}),readFile:c=>r(c,(a,d,g,y)=>{if(typeof a!="object")throw new Error(`"${y.slice(0,g).join("/")}" is not a directory`);if(a=a[d],g+1===y.length&&typeof a!="string")throw new Error(`"${c}" is not a file`);return a}),writeFile:(c,a)=>void r(c,(d,g,y,h)=>{if(typeof d!="object")throw new Error(`"${h.slice(0,y).join("/")}" is not a directory`);if(y+1===h.length){if(typeof d[g]=="object")throw new Error(`"${c}" is a directory and cannot be overwritten with a file`);d[g]=a,t()}else return d=d[g]}),toMap:()=>{const c={clear:()=>u.rm("/"),delete:a=>u.getType(a)==="file"&&u.rm(a),entries:()=>f()[Symbol.iterator](),forEach:a=>{f().forEach(([d,g])=>a(g,d,c))},get:a=>{try{return u.readFile(a)}catch{}},has:a=>u.getType(a)==="file",keys:()=>f(a=>a)[Symbol.iterator](),set:(a,d)=>{const g=F(a);return u.getType(g)!=="dir"&&u.mkdir(g),u.writeFile(a,d),c},get size(){return f().length},values:()=>f((a,d)=>d)[Symbol.iterator](),[Symbol.iterator]:()=>c.entries(),[Symbol.toStringTag]:"Map"};return c}};return u},Je=(e,i)=>{const n=new Map,o=new Map,s=new Map,l={getType:(t,r)=>{n.has(t)||n.set(t,A());const[f,u]=n.get(t);return(r||f()===void 0)&&u(e.getType(t)),f()},readdir:(t,r)=>{o.has(t)||o.set(t,A());const[f,u]=o.get(t);return(r||f()===void 0)&&u(e.readdir(t)),f()},mkdir:t=>{e.mkdir(t),o.get(F(t))?.[1]((r=[])=>[...r,t])},readFile:(t,r)=>{s.has(t)||s.set(t,A());const[f,u]=s.get(t);return(r||f()===void 0)&&u(e.readFile(t)),f()},writeFile:(t,r)=>{const f=e.getType(t)===null;e.writeFile(t,r),s.get(t)?.[1](r),f&&(l.getType(t,!0),o.get(F(t))?.[1]((u=[])=>[...u,I(t)]))},rename:(t,r)=>{const f=e.getType(t),u=e.getType(r);if(f==="dir"&&u==="file")throw new Error(`Cannot overwrite file "${r}" with directory "${t}"`);if(f==="file"&&u==="dir")throw new Error(`cannot overwrite directory "${r}" with file "${t}"`);typeof e.rename=="function"?e.rename(t,r):f==="dir"?(u===null&&e.mkdir(r),e.readdir(t).forEach(c=>l.rename(`${t}/${c}`,`${r}/${c}`))):e.writeFile(r,e.readFile(t)),n.get(t)?.[1](void 0),n.delete(t),o.get(F(t))?.[1]((c=[])=>c.filter(a=>a===I(t))),o.get(F(r))?.[1]((c=[])=>[...c,I(r)])},rm:t=>{e.rm(t),n.get(t)?.[1](void 0),n.delete(t),[...o.keys()].forEach(r=>{r.startsWith(`${t}/`)&&(n.get(r)?.[1](void 0),n.delete(r))}),o.get(F(t))?.[1]((r=[])=>r.filter(f=>f===I(t)))}};return i&&i((t,r)=>{(t==="mkdir"||t==="rm")&&o.get(F(r))?.[1]((f=[])=>f.includes(r)?f:[...f,r]),t==="rm"&&n.get(r)?.[1](null),t==="writeFile"&&s.has(r)&&l.readFile(r,!0)}),l},he=(e,i)=>{const n=new Map,o=new Map,s=new Map,l={getType:(t,r)=>{n.has(t)||n.set(t,X(()=>e.getType(t)));const[f,{refetch:u}]=n.get(t);return r&&u(),f()},readdir:(t,r)=>{o.has(t)||o.set(t,X(()=>e.readdir(t)));const[f,{refetch:u}]=o.get(t);return r&&u(),f()},mkdir:t=>e.mkdir(t).then(()=>{t.split("/").forEach((r,f,u)=>{const c=u.slice(0,f+1).join("/");n.has(c)?n.get(c)[1].refetch():l.getType(c)}),o.get(F(t))?.[1].refetch()}),readFile:(t,r)=>{s.has(t)||s.set(t,X(()=>e.readFile(t)));const[f,{refetch:u}]=s.get(t);return r&&u(),f()},writeFile:(t,r)=>e.writeFile(t,r).then(()=>{s.get(t)?.[1].mutate(r);const f=I(t);o.get(F(t))?.[1].mutate((u=[])=>u.includes(f)?u:[...u,f])}),rename:async(t,r)=>{const f=await e.getType(t),u=await e.getType(r);if(f==="dir"&&u==="file")throw new Error(`Cannot overwrite file "${r}" with directory "${t}"`);if(f==="file"&&u==="dir")throw new Error(`cannot overwrite directory "${r}" with file "${t}"`);typeof e.rename=="function"?await e.rename(t,r):(f==="dir"?(u===null&&await e.mkdir(r),(await e.readdir(t)).forEach(c=>l.rename(`${t}/${c}`,`${r}/${c}`))):await e.writeFile(r,await e.readFile(t)),await e.rm(t)),Ne(()=>{n.get(t)?.[1].mutate(void 0),n.delete(t);const c=F(t);o.get(c)?.[1].refetch();const a=F(r);c!==a&&o.get(a)?.[1].refetch()})},rm:t=>e.rm(t).then(()=>{n.get(t)?.[1].mutate(void 0),n.delete(t),[...o.keys()].forEach(r=>{r.startsWith(`${t}/`)&&(n.get(r)?.[1].mutate(void 0),n.delete(r))}),o.get(F(t))?.[1].refetch()})};return i&&i((t,r)=>{(t==="mkdir"||t==="rm")&&o.get(F(r))?.[1].mutate((f=[])=>f.includes(r)?f:[...f,r]),t==="rm"&&n.get(r)?.[1].mutate(null),t==="writeFile"&&s.get(r)?.[1].refetch()}),l};function we(e,i){return e instanceof Promise?e.then(n=>he(n,i)):e.async?he(e,i):Je(e,i)}const Ke=T("<textarea></textarea>",2),Ge=T("<div><p><button></button></p></div>",6),Xe=T("<button>New File</button>",2),Qe=T("<button>New Dir</button>",2),Ye=T("<div><button></button> <!> <input></div>",6),Ze=T("<ul></ul>",2),ze=T("<li></li>",2),et=T("<h4>FileSystem primitive</h4>",2),tt=T("<p>Object virtual file system (localStorage persistence)</p>",2),nt=T("<p>Web Filesystem Access file system</p>",2),it=T("<p><em>Warning!</em> This can overwrite or delete actual files!</p>",4),rt=T('<div class="box-border flex min-h-screen w-full flex-col items-center justify-center space-y-4 bg-gray-800 p-24 text-white"><div class="wrapper-v"><div></div></div></div>',6),st=T("<div>Error: <!> <button>reset</button></div>",5),lt=T("<button>Request directory access</button>",2),ot=e=>{const[i,n]=A(!1),o=B(l=>l||i()?e.fs.readFile(e.path):void 0),s=l=>e.fs.writeFile(e.path,l);return(()=>{const l=Ge.cloneNode(!0),t=l.firstChild,r=t.firstChild;return r.$$click=()=>n(!i()),P(r,()=>i()?"-":"+"),P(t,()=>I(e.path),null),P(l,j(W,{get when(){return i()},get children(){const f=Ke.cloneNode(!0);return f.$$input=u=>s(u.currentTarget.value),U(()=>f.value=o()),f}}),null),l})()},oe=e=>{const[i,n]=A(e.path==="/"),[o,s]=A(""),l=()=>i()&&e.fs.readdir(e.path);return[(()=>{const t=Ye.cloneNode(!0),r=t.firstChild,f=r.nextSibling,u=f.nextSibling,c=u.nextSibling,a=c.nextSibling;return r.$$click=()=>n(!i()),P(r,()=>i()?"-":"+"),P(t,()=>I(e.path)||"/",u),a.$$input=d=>s(d.currentTarget.value),P(t,j(W,{get when(){return o()!==""},get children(){return[(()=>{const d=Xe.cloneNode(!0);return d.$$click=()=>e.fs.writeFile(`${e.path==="/"?"":e.path}/${o()}`,""),d})(),(()=>{const d=Qe.cloneNode(!0);return d.$$click=()=>e.fs.mkdir(`${e.path==="/"?"":e.path}/${o()}`),d})()]}}),null),t})(),j(W,{get when(){return l()!==void 0},get children(){const t=Ze.cloneNode(!0);return P(t,j(Le,{get each(){return l()},children:r=>(()=>{const f=ze.cloneNode(!0);return P(f,j(W,{get when(){return e.fs.getType(r)==="dir"},get fallback(){return j(ot,{get fs(){return e.fs},get path(){return`${e.path==="/"?"":e.path}/${r}`}})},get children(){return j(oe,{get fs(){return e.fs},path:r})}})),f})()})),t}})]},ct=()=>{const e=Ue({src:{"index.ts":`console.log(0);
`}},localStorage),i=we(e),[n,o]=A(!1),[s]=X(n,async()=>we(We({mode:"readwrite"})));return(()=>{const l=rt.cloneNode(!0),t=l.firstChild,r=t.firstChild;return P(r,j(De,{fallback:(f,u)=>(()=>{const c=st.cloneNode(!0),a=c.firstChild,d=a.nextSibling,g=d.nextSibling,y=g.nextSibling;return P(c,f,d),Be(y,"click",u,!0),c})(),get children(){return[et.cloneNode(!0),tt.cloneNode(!0),j(oe,{fs:i,path:"/"}),j(W,{get when(){return B(()=>!s.loading&&!s.error)()&&s()},get fallback(){return(()=>{const f=lt.cloneNode(!0);return f.$$click=()=>o(!0),U(()=>f.disabled=s.loading),f})()},get children(){return[nt.cloneNode(!0),it.cloneNode(!0),j(oe,{get fs(){return s()},path:"/"})]}})]}})),l})()};Ie(()=>j(ct,{}),document.getElementById("root"));qe(["click","input"]);
